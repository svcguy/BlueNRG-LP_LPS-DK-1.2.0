<!-- HTML header for doxygen 1.8.10-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.10"/>
<title>BlueNRG-LP/BlueNRG-LPS Peripherals drivers MIX Examples: RADIO_StarNetwork_Master_main.c Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="STcustom.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="ST-logo-small.jpg"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">BlueNRG-LP/BlueNRG-LPS Peripherals drivers MIX Examples
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.10 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">RADIO_StarNetwork_Master_main.c</div>  </div>
</div><!--header-->
<div class="contents">
<a href="_r_a_d_i_o___star_network___master__main_8c.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;</div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment">/******************** (C) COPYRIGHT 2021 STMicroelectronics ********************</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment">* File Name          : RADIO_StarNetwork_Master_main.c</span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment">* Author             : RF Application Team</span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment">* Version            : 1.0.0</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment">* Date               : 25-March-2019</span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment">* Description        : The code defines a Master device of a star network. The Master knows how many slaves are in the network and their slave address. Then, periodically, asks for data the slaves and waits for their data. If data are received, then the Master answers with an ACK packet to the selected Slave.</span></div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment">********************************************************************************</span></div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment">* THE PRESENT FIRMWARE WHICH IS FOR GUIDANCE ONLY AIMS AT PROVIDING CUSTOMERS</span></div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment">* WITH CODING INFORMATION REGARDING THEIR PRODUCTS IN ORDER FOR THEM TO SAVE TIME.</span></div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment">* AS A RESULT, STMICROELECTRONICS SHALL NOT BE HELD LIABLE FOR ANY DIRECT,</span></div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment">* INDIRECT OR CONSEQUENTIAL DAMAGES WITH RESPECT TO ANY CLAIMS ARISING FROM THE</span></div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="comment">* CONTENT OF SUCH FIRMWARE AND/OR THE USE MADE BY CUSTOMERS OF THE CODING</span></div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="comment">* INFORMATION CONTAINED HEREIN IN CONNECTION WITH THEIR PRODUCTS.</span></div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="comment">*******************************************************************************/</span></div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;<span class="comment">/* Includes ------------------------------------------------------------------*/</span></div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;<span class="preprocessor">#include &lt;stdio.h&gt;</span></div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;<span class="preprocessor">#include &lt;string.h&gt;</span></div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;<span class="preprocessor">#include &quot;rf_driver_hal_vtimer.h&quot;</span></div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;<span class="preprocessor">#include &quot;rf_driver_hal_radio_2g4.h&quot;</span></div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;<span class="preprocessor">#include &quot;rf_driver_ll_radio_2g4.h&quot;</span></div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;<span class="preprocessor">#include &quot;bluenrg_lp_evb_config.h&quot;</span></div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;<span class="preprocessor">#include &quot;main_common.h&quot;</span></div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;<span class="comment">/* Private typedef -----------------------------------------------------------*/</span></div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;<span class="comment">/* Private define ------------------------------------------------------------*/</span></div>
<div class="line"><a name="l00202"></a><span class="lineno"><a class="line" href="group___r_a_d_i_o___star_network.html#gac74d6b8cc93ffc71a63bf5263ad4541b">  202</a></span>&#160;<span class="preprocessor">#define CALIBRATION_INTERVAL_CONF   10000</span></div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;<span class="preprocessor">#if defined CONFIG_HW_LS_RO  </span></div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;<span class="comment">/* Calibration must be done */</span></div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;<span class="preprocessor">#define INITIAL_CALIBRATION TRUE</span></div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;<span class="preprocessor">#define CALIBRATION_INTERVAL        CALIBRATION_INTERVAL_CONF</span></div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;<span class="preprocessor">#elif defined CONFIG_HW_LS_XTAL</span></div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;<span class="comment">/* No Calibration */</span></div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;<span class="preprocessor">#define INITIAL_CALIBRATION FALSE</span></div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;<span class="preprocessor">#define CALIBRATION_INTERVAL        0</span></div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;<span class="comment">/* Private macro -------------------------------------------------------------*/</span></div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;<span class="comment">/* Private variables ---------------------------------------------------------*/</span></div>
<div class="line"><a name="l00219"></a><span class="lineno"><a class="line" href="group___r_a_d_i_o___star_network.html#gab0abfa067aa536bc1414f2194041d1c2">  219</a></span>&#160;uint8_t <a class="code" href="group___r_a_d_i_o___star_network.html#gab0abfa067aa536bc1414f2194041d1c2">comm_token</a> = 1;         <span class="comment">/* Communication token */</span></div>
<div class="line"><a name="l00220"></a><span class="lineno"><a class="line" href="group___r_a_d_i_o___star_network.html#ga9a35d37589cf8d1de75773518f09c695">  220</a></span>&#160;uint8_t <a class="code" href="group___r_a_d_i_o___star_network.html#ga9a35d37589cf8d1de75773518f09c695">sendmeBuffer</a>[2];</div>
<div class="line"><a name="l00221"></a><span class="lineno"><a class="line" href="group___r_a_d_i_o___star_network.html#gaaaff8c7d7330beff54353f88451a4ec0">  221</a></span>&#160;uint8_t <a class="code" href="group___r_a_d_i_o___star_network.html#gaaaff8c7d7330beff54353f88451a4ec0">receiveBuffer</a>[MAX_PACKET_LENGTH];</div>
<div class="line"><a name="l00222"></a><span class="lineno"><a class="line" href="group___r_a_d_i_o___star_network.html#gab884287465dd2f6f94a0bd50f6c0f044">  222</a></span>&#160;uint8_t <a class="code" href="group___r_a_d_i_o___star_network.html#gab884287465dd2f6f94a0bd50f6c0f044">ackBuffer</a>[2];</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;</div>
<div class="line"><a name="l00224"></a><span class="lineno"><a class="line" href="group___r_a_d_i_o___star_network.html#gaffc5a637a60c0a84ea24c189dec92952">  224</a></span>&#160;uint32_t <a class="code" href="group___r_a_d_i_o___star_network.html#gaffc5a637a60c0a84ea24c189dec92952">networkID</a>[NSLAVES] = {SLAVE_DEV1, SLAVE_DEV2};</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;</div>
<div class="line"><a name="l00226"></a><span class="lineno"><a class="line" href="group___r_a_d_i_o___star_network.html#gaf28be1425091b08ea2714db3512361ee">  226</a></span>&#160;ActionPacket <a class="code" href="group___r_a_d_i_o___star_network.html#gaf28be1425091b08ea2714db3512361ee">waitDataAction</a>;</div>
<div class="line"><a name="l00227"></a><span class="lineno"><a class="line" href="group___r_a_d_i_o___star_network.html#ga99921230dd0dc0f652517d307acf4f3c">  227</a></span>&#160;ActionPacket <a class="code" href="group___r_a_d_i_o___star_network.html#ga99921230dd0dc0f652517d307acf4f3c">sendmeAction</a>;</div>
<div class="line"><a name="l00228"></a><span class="lineno"><a class="line" href="group___r_a_d_i_o___star_network.html#ga06014f65729666809598c43d620e4ea8">  228</a></span>&#160;ActionPacket <a class="code" href="group___r_a_d_i_o___star_network.html#ga06014f65729666809598c43d620e4ea8">sendAckAction</a>;</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;</div>
<div class="line"><a name="l00230"></a><span class="lineno"><a class="line" href="group___r_a_d_i_o___star_network.html#gad36508f85b383d4839e3d1965771b43c">  230</a></span>&#160;uint32_t <a class="code" href="group___r_a_d_i_o___star_network.html#gad36508f85b383d4839e3d1965771b43c">request_counter_test</a>[NSLAVES] = {0,};</div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;uint32_t </div>
<div class="line"><a name="l00232"></a><span class="lineno"><a class="line" href="group___r_a_d_i_o___star_network.html#ga5e7146b8d2a7d821e35a202ab2c05da2">  232</a></span>&#160;<a class="code" href="group___r_a_d_i_o___star_network.html#ga5e7146b8d2a7d821e35a202ab2c05da2">pkt_counter_test</a>[NSLAVES] = {0,};</div>
<div class="line"><a name="l00233"></a><span class="lineno"><a class="line" href="group___r_a_d_i_o___star_network.html#ga36eb06957f4f22be88fc0a6c0a6af162">  233</a></span>&#160;uint32_t <a class="code" href="group___r_a_d_i_o___star_network.html#ga36eb06957f4f22be88fc0a6c0a6af162">pkt_lost_counter_test</a>[NSLAVES] = {0,};</div>
<div class="line"><a name="l00234"></a><span class="lineno"><a class="line" href="group___r_a_d_i_o___star_network.html#ga49b0be536e22f4160eb843de6b46bbd5">  234</a></span>&#160;uint8_t <a class="code" href="group___r_a_d_i_o___star_network.html#ga49b0be536e22f4160eb843de6b46bbd5">retry</a> = 0;</div>
<div class="line"><a name="l00235"></a><span class="lineno"><a class="line" href="group___r_a_d_i_o___star_network.html#gaf05586da1114dabb604431c683b5ab8a">  235</a></span>&#160;uint8_t <a class="code" href="group___r_a_d_i_o___star_network.html#gaf05586da1114dabb604431c683b5ab8a">printer</a> = 0;</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;</div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;<span class="comment">/* Private function prototypes -----------------------------------------------*/</span></div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;<span class="keywordtype">void</span> <a class="code" href="group___r_a_d_i_o___star_network.html#ga9112ed9353f1e9a1cd838e1d7ad98b60">InitializationActionPackets</a>(<span class="keywordtype">void</span>);</div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;uint8_t <a class="code" href="group___r_a_d_i_o___star_network.html#gac7b26e610448c50718409e63c3018db3">sendmeCB</a>(ActionPacket* p);</div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;uint8_t <a class="code" href="group___r_a_d_i_o___star_network.html#gacc7a20d65d84175a11cc86831236ea15">waitDataCB</a>(ActionPacket* p);</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;uint8_t <a class="code" href="group___r_a_d_i_o___star_network.html#gacbb84ffbcdec6672fa67942836f6d544">sendAckCB</a>(ActionPacket* p);</div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;uint8_t <a class="code" href="group___r_a_d_i_o___automatic_ch_mgm.html#ga4ab3d8296ed358bb4bf35de68260beda">dataRoutine</a>(ActionPacket* p,  ActionPacket* next);</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;</div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;<span class="comment">/* Private functions ---------------------------------------------------------*/</span></div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;</div>
<div class="line"><a name="l00251"></a><span class="lineno"><a class="line" href="group___r_a_d_i_o___star_network.html#gac7b26e610448c50718409e63c3018db3">  251</a></span>&#160;uint8_t <a class="code" href="group___r_a_d_i_o___star_network.html#gac7b26e610448c50718409e63c3018db3">sendmeCB</a>(ActionPacket* p)</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;{</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;  BSP_LED_Toggle(BSP_LED1);</div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;  <a class="code" href="group___r_a_d_i_o___star_network.html#gad36508f85b383d4839e3d1965771b43c">request_counter_test</a>[<a class="code" href="group___r_a_d_i_o___star_network.html#gab0abfa067aa536bc1414f2194041d1c2">comm_token</a>-1]++;</div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;  <a class="code" href="group___r_a_d_i_o___star_network.html#gaf05586da1114dabb604431c683b5ab8a">printer</a>++;</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;  <span class="keywordflow">return</span> TRUE;</div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;} </div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;</div>
<div class="line"><a name="l00260"></a><span class="lineno"><a class="line" href="group___r_a_d_i_o___star_network.html#gacc7a20d65d84175a11cc86831236ea15">  260</a></span>&#160;uint8_t <a class="code" href="group___r_a_d_i_o___star_network.html#gacc7a20d65d84175a11cc86831236ea15">waitDataCB</a>(ActionPacket* p)</div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;{</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;  <span class="comment">/* received a packet */</span></div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;  <span class="keywordflow">if</span>((p-&gt;status &amp; BLUE_INTERRUPT1REG_RCVOK) != 0) {</div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;    <a class="code" href="group___r_a_d_i_o___star_network.html#gaf05586da1114dabb604431c683b5ab8a">printer</a>++;</div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;    <a class="code" href="group___r_a_d_i_o___star_network.html#ga5e7146b8d2a7d821e35a202ab2c05da2">pkt_counter_test</a>[<a class="code" href="group___r_a_d_i_o___star_network.html#gab0abfa067aa536bc1414f2194041d1c2">comm_token</a>-1]++;</div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;    <span class="keywordflow">return</span> TRUE;</div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;  }</div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;  <span class="keywordflow">else</span> <span class="keywordflow">if</span>(((p-&gt;status &amp; BLUE_INTERRUPT1REG_RCVTIMEOUT) != 0) || ((p-&gt;status &amp; BLUE_INTERRUPT1REG_RCVCRCERR) != 0)) {</div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;    <a class="code" href="group___r_a_d_i_o___star_network.html#ga36eb06957f4f22be88fc0a6c0a6af162">pkt_lost_counter_test</a>[<a class="code" href="group___r_a_d_i_o___star_network.html#gab0abfa067aa536bc1414f2194041d1c2">comm_token</a>-1]++;</div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;    <a class="code" href="group___r_a_d_i_o___star_network.html#gaf05586da1114dabb604431c683b5ab8a">printer</a> = 0;</div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;    </div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;    <a class="code" href="group___r_a_d_i_o___star_network.html#gab0abfa067aa536bc1414f2194041d1c2">comm_token</a>++;</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;    <span class="keywordflow">if</span>(<a class="code" href="group___r_a_d_i_o___star_network.html#gab0abfa067aa536bc1414f2194041d1c2">comm_token</a> &gt; NSLAVES) {</div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;      <a class="code" href="group___r_a_d_i_o___star_network.html#gab0abfa067aa536bc1414f2194041d1c2">comm_token</a> = 1;</div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;    }</div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;    RADIO_SetTxAttributes(STATE_MACHINE_0, <a class="code" href="group___r_a_d_i_o___star_network.html#gaffc5a637a60c0a84ea24c189dec92952">networkID</a>[<a class="code" href="group___r_a_d_i_o___star_network.html#gab0abfa067aa536bc1414f2194041d1c2">comm_token</a>-1], 0x555555);</div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;    </div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;    <span class="keywordflow">return</span> FALSE;      </div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;  }</div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;  <span class="keywordflow">return</span> TRUE;</div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;}</div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;</div>
<div class="line"><a name="l00289"></a><span class="lineno"><a class="line" href="group___r_a_d_i_o___star_network.html#gacbb84ffbcdec6672fa67942836f6d544">  289</a></span>&#160;uint8_t <a class="code" href="group___r_a_d_i_o___star_network.html#gacbb84ffbcdec6672fa67942836f6d544">sendAckCB</a>(ActionPacket* p)</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;{</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;  <a class="code" href="group___r_a_d_i_o___star_network.html#ga49b0be536e22f4160eb843de6b46bbd5">retry</a> = 0;</div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;  </div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;  <a class="code" href="group___r_a_d_i_o___star_network.html#gab0abfa067aa536bc1414f2194041d1c2">comm_token</a>++;</div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;  <span class="keywordflow">if</span>(<a class="code" href="group___r_a_d_i_o___star_network.html#gab0abfa067aa536bc1414f2194041d1c2">comm_token</a> &gt; NSLAVES) {</div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;    <a class="code" href="group___r_a_d_i_o___star_network.html#gab0abfa067aa536bc1414f2194041d1c2">comm_token</a> = 1;</div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;  }</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;  RADIO_SetTxAttributes(STATE_MACHINE_0, <a class="code" href="group___r_a_d_i_o___star_network.html#gaffc5a637a60c0a84ea24c189dec92952">networkID</a>[<a class="code" href="group___r_a_d_i_o___star_network.html#gab0abfa067aa536bc1414f2194041d1c2">comm_token</a>-1], 0x555555);</div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;  </div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;  <span class="keywordflow">return</span> TRUE;  </div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;}</div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;</div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;uint8_t <a class="code" href="group___r_a_d_i_o___automatic_ch_mgm.html#ga4ab3d8296ed358bb4bf35de68260beda">dataRoutine</a>(ActionPacket* p,  ActionPacket* next)</div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;{</div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;  <span class="keywordflow">if</span>( (p-&gt;status &amp; BLUE_INTERRUPT1REG_DONE) != 0) {</div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;    </div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;    <span class="keywordflow">if</span>((p-&gt;status &amp; BLUE_STATUSREG_PREVTRANSMIT) == 0){</div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;      </div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;      <span class="comment">/* received a packet */</span></div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;      <span class="keywordflow">if</span>((p-&gt;status &amp; BLUE_INTERRUPT1REG_RCVOK) != 0) {</div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;      }</div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;      <span class="keywordflow">else</span> <span class="keywordflow">if</span>((p-&gt;status &amp; BLUE_INTERRUPT1REG_RCVTIMEOUT) != 0) {</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;      }</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;      <span class="keywordflow">else</span> <span class="keywordflow">if</span>((p-&gt;status &amp; BLUE_INTERRUPT1REG_RCVCRCERR) != 0) {</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;      }</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;    }</div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;    </div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;  }</div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;  <span class="keywordflow">return</span> TRUE;  </div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;}</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;</div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;</div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;<span class="keywordtype">int</span> <a class="code" href="group___micro___hello_world.html#ga840291bc02cba5474a4cb46a9b9566fe">main</a>(<span class="keywordtype">void</span>)</div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;{ </div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;  HAL_VTIMER_InitType VTIMER_InitStruct = {<a class="code" href="group___micro___power_manager.html#ga36faeb7c4630a53742da2e3a1d352bc4">HS_STARTUP_TIME</a>, INITIAL_CALIBRATION, CALIBRATION_INTERVAL};</div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;  </div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;  <span class="comment">/* System initialization function */</span></div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;  <span class="keywordflow">if</span> (SystemInit(SYSCLK_64M, BLE_SYSCLK_32M) != SUCCESS) {</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;    <span class="comment">/* Error during system clock configuration take appropriate action */</span></div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;    <span class="keywordflow">while</span>(1);</div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;  }</div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;</div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;</div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;    </div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;  BSP_COM_Init(NULL);</div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;  BSP_LED_Init(BSP_LED1);</div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;  </div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;  RADIO_Init();</div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;  HAL_VTIMER_Init(&amp;VTIMER_InitStruct);</div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;  </div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;  <span class="comment">/* Configures the transmit power level */</span></div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;  RADIO_SetTxPower(MAX_OUTPUT_RF_POWER);</div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;    </div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;  <span class="comment">/* Build send me packet */</span></div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;  <a class="code" href="group___r_a_d_i_o___star_network.html#ga9a35d37589cf8d1de75773518f09c695">sendmeBuffer</a>[0] = 0xB4;</div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;  <a class="code" href="group___r_a_d_i_o___star_network.html#ga9a35d37589cf8d1de75773518f09c695">sendmeBuffer</a>[1] = 0;</div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;  </div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;  <span class="comment">/* Build ACK packet */</span></div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;  <a class="code" href="group___r_a_d_i_o___star_network.html#ga9a35d37589cf8d1de75773518f09c695">sendmeBuffer</a>[0] = 0xAE;</div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;  <a class="code" href="group___r_a_d_i_o___star_network.html#ga9a35d37589cf8d1de75773518f09c695">sendmeBuffer</a>[1] = 0;</div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;  </div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;  <span class="comment">/* Initialize the routine for sending data and wait for the ACK */</span></div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;  <a class="code" href="group___r_a_d_i_o___star_network.html#ga9112ed9353f1e9a1cd838e1d7ad98b60">InitializationActionPackets</a>();</div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;  </div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;  </div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;  <span class="comment">/* Call this function for the first action packet to be executed */</span></div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;  RADIO_MakeActionPacketPending(&amp;<a class="code" href="group___r_a_d_i_o___star_network.html#ga99921230dd0dc0f652517d307acf4f3c">sendmeAction</a>);</div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;  </div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;  printf(<span class="stringliteral">&quot;\r\n\nRequest Sent,Packet received, Request lost\r\n&quot;</span>);</div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;  </div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;  <span class="comment">/* Infinite loop */</span></div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;  <span class="keywordflow">while</span>(1) {</div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;    HAL_VTIMER_Tick();</div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;    </div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;    <span class="comment">/* Printout a summary about the communication in the network */</span></div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;    <span class="keywordflow">if</span>(<a class="code" href="group___r_a_d_i_o___star_network.html#gaf05586da1114dabb604431c683b5ab8a">printer</a>==0) {</div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;      <span class="keywordflow">for</span>(uint8_t i = 0; i&lt; NSLAVES; i++) {</div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;        printf(<span class="stringliteral">&quot;%8d,%8d,%8d,&quot;</span>,(<span class="keywordtype">int</span>)<a class="code" href="group___r_a_d_i_o___star_network.html#gad36508f85b383d4839e3d1965771b43c">request_counter_test</a>[i], (<span class="keywordtype">int</span>)<a class="code" href="group___r_a_d_i_o___star_network.html#ga5e7146b8d2a7d821e35a202ab2c05da2">pkt_counter_test</a>[i], (<span class="keywordtype">int</span>)(<a class="code" href="group___r_a_d_i_o___star_network.html#gad36508f85b383d4839e3d1965771b43c">request_counter_test</a>[i]-<a class="code" href="group___r_a_d_i_o___star_network.html#ga5e7146b8d2a7d821e35a202ab2c05da2">pkt_counter_test</a>[i]));</div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;      }      </div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;      printf(<span class="stringliteral">&quot;\r&quot;</span>);</div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;    }</div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;  }   </div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;}</div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;</div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;</div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;<span class="keywordtype">void</span> <a class="code" href="group___r_a_d_i_o___star_network.html#ga9112ed9353f1e9a1cd838e1d7ad98b60">InitializationActionPackets</a>(<span class="keywordtype">void</span>)</div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;{</div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;  <span class="comment">/* Build Action Packets */</span></div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;  <a class="code" href="group___r_a_d_i_o___star_network.html#ga99921230dd0dc0f652517d307acf4f3c">sendmeAction</a>.StateMachineNo = STATE_MACHINE_0;</div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;  <a class="code" href="group___r_a_d_i_o___star_network.html#ga99921230dd0dc0f652517d307acf4f3c">sendmeAction</a>.ActionTag = RELATIVE | TIMER_WAKEUP | TXRX | PLL_TRIG;</div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;  <a class="code" href="group___r_a_d_i_o___star_network.html#ga99921230dd0dc0f652517d307acf4f3c">sendmeAction</a>.WakeupTime = 30+WKP_OFFSET;           <span class="comment">/* Internal delay before start action */</span></div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;  <a class="code" href="group___r_a_d_i_o___star_network.html#ga99921230dd0dc0f652517d307acf4f3c">sendmeAction</a>.MaxReceiveLength = 0;                 <span class="comment">/* Not applied for TX */</span></div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;  <a class="code" href="group___r_a_d_i_o___star_network.html#ga99921230dd0dc0f652517d307acf4f3c">sendmeAction</a>.data = <a class="code" href="group___r_a_d_i_o___star_network.html#ga9a35d37589cf8d1de75773518f09c695">sendmeBuffer</a>;                  <span class="comment">/* Data to send */</span></div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;  <a class="code" href="group___r_a_d_i_o___star_network.html#ga99921230dd0dc0f652517d307acf4f3c">sendmeAction</a>.next_true = &amp;<a class="code" href="group___r_a_d_i_o___star_network.html#gaf28be1425091b08ea2714db3512361ee">waitDataAction</a>;          <span class="comment">/* Wait for data */</span></div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;  <a class="code" href="group___r_a_d_i_o___star_network.html#ga99921230dd0dc0f652517d307acf4f3c">sendmeAction</a>.next_false = &amp;<a class="code" href="group___r_a_d_i_o___star_network.html#gaf28be1425091b08ea2714db3512361ee">waitDataAction</a>;         <span class="comment">/* Wait for data */</span></div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;  <a class="code" href="group___r_a_d_i_o___star_network.html#ga99921230dd0dc0f652517d307acf4f3c">sendmeAction</a>.condRoutine = <a class="code" href="group___r_a_d_i_o___star_network.html#gac7b26e610448c50718409e63c3018db3">sendmeCB</a>;               <span class="comment">/* Condition callback */</span></div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;  <a class="code" href="group___r_a_d_i_o___star_network.html#ga99921230dd0dc0f652517d307acf4f3c">sendmeAction</a>.dataRoutine = <a class="code" href="group___r_a_d_i_o___automatic_ch_mgm.html#ga4ab3d8296ed358bb4bf35de68260beda">dataRoutine</a>;            <span class="comment">/* Data callback */</span></div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;</div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;  <a class="code" href="group___r_a_d_i_o___star_network.html#gaf28be1425091b08ea2714db3512361ee">waitDataAction</a>.StateMachineNo = STATE_MACHINE_0;</div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;  <a class="code" href="group___r_a_d_i_o___star_network.html#gaf28be1425091b08ea2714db3512361ee">waitDataAction</a>.ActionTag = RELATIVE | TIMER_WAKEUP;</div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;  <a class="code" href="group___r_a_d_i_o___star_network.html#gaf28be1425091b08ea2714db3512361ee">waitDataAction</a>.WakeupTime = 30+WKP_OFFSET;               <span class="comment">/* Internal delay before start action */</span></div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;  <a class="code" href="group___r_a_d_i_o___star_network.html#gaf28be1425091b08ea2714db3512361ee">waitDataAction</a>.MaxReceiveLength = MAX_LL_PACKET_LENGTH;  </div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;  <a class="code" href="group___r_a_d_i_o___star_network.html#gaf28be1425091b08ea2714db3512361ee">waitDataAction</a>.data = <a class="code" href="group___r_a_d_i_o___star_network.html#gaaaff8c7d7330beff54353f88451a4ec0">receiveBuffer</a>;                     <span class="comment">/* Buffer for ACK packet reception */</span></div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;  <a class="code" href="group___r_a_d_i_o___star_network.html#gaf28be1425091b08ea2714db3512361ee">waitDataAction</a>.next_true = &amp;<a class="code" href="group___r_a_d_i_o___star_network.html#ga06014f65729666809598c43d620e4ea8">sendAckAction</a>;               <span class="comment">/* If TRUE: send the ACK */</span>   </div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;  <a class="code" href="group___r_a_d_i_o___star_network.html#gaf28be1425091b08ea2714db3512361ee">waitDataAction</a>.next_false = &amp;<a class="code" href="group___r_a_d_i_o___star_network.html#ga99921230dd0dc0f652517d307acf4f3c">sendmeAction</a>;               <span class="comment">/* If FALSE: send a new request */</span></div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;  <a class="code" href="group___r_a_d_i_o___star_network.html#gaf28be1425091b08ea2714db3512361ee">waitDataAction</a>.condRoutine = <a class="code" href="group___r_a_d_i_o___star_network.html#gacc7a20d65d84175a11cc86831236ea15">waitDataCB</a>;                 <span class="comment">/* Condition callback */</span></div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;  <a class="code" href="group___r_a_d_i_o___star_network.html#gaf28be1425091b08ea2714db3512361ee">waitDataAction</a>.dataRoutine = <a class="code" href="group___r_a_d_i_o___automatic_ch_mgm.html#ga4ab3d8296ed358bb4bf35de68260beda">dataRoutine</a>;                <span class="comment">/* Data callback */</span></div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;  </div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;  <a class="code" href="group___r_a_d_i_o___star_network.html#ga06014f65729666809598c43d620e4ea8">sendAckAction</a>.StateMachineNo = STATE_MACHINE_0;</div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;  <a class="code" href="group___r_a_d_i_o___star_network.html#ga06014f65729666809598c43d620e4ea8">sendAckAction</a>.ActionTag = RELATIVE | TIMER_WAKEUP | TXRX;</div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;  <a class="code" href="group___r_a_d_i_o___star_network.html#ga06014f65729666809598c43d620e4ea8">sendAckAction</a>.WakeupTime = 40+WKP_OFFSET;           <span class="comment">/* Internal delay before start action */</span></div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;  <a class="code" href="group___r_a_d_i_o___star_network.html#ga06014f65729666809598c43d620e4ea8">sendAckAction</a>.MaxReceiveLength = 0;                 </div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;  <a class="code" href="group___r_a_d_i_o___star_network.html#ga06014f65729666809598c43d620e4ea8">sendAckAction</a>.data = <a class="code" href="group___r_a_d_i_o___star_network.html#gab884287465dd2f6f94a0bd50f6c0f044">ackBuffer</a>;                     <span class="comment">/* Buffer for ACK packet reception */</span></div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;  <a class="code" href="group___r_a_d_i_o___star_network.html#ga06014f65729666809598c43d620e4ea8">sendAckAction</a>.next_true = &amp;<a class="code" href="group___r_a_d_i_o___star_network.html#ga99921230dd0dc0f652517d307acf4f3c">sendmeAction</a>;            <span class="comment">/* send a new request */</span>   </div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;  <a class="code" href="group___r_a_d_i_o___star_network.html#ga06014f65729666809598c43d620e4ea8">sendAckAction</a>.next_false = &amp;<a class="code" href="group___r_a_d_i_o___star_network.html#ga99921230dd0dc0f652517d307acf4f3c">sendmeAction</a>;           <span class="comment">/* send a new request */</span>   </div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;  <a class="code" href="group___r_a_d_i_o___star_network.html#ga06014f65729666809598c43d620e4ea8">sendAckAction</a>.condRoutine = <a class="code" href="group___r_a_d_i_o___star_network.html#gacbb84ffbcdec6672fa67942836f6d544">sendAckCB</a>;              <span class="comment">/* Condition callback */</span></div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;  <a class="code" href="group___r_a_d_i_o___star_network.html#ga06014f65729666809598c43d620e4ea8">sendAckAction</a>.dataRoutine = <a class="code" href="group___r_a_d_i_o___automatic_ch_mgm.html#ga4ab3d8296ed358bb4bf35de68260beda">dataRoutine</a>;            <span class="comment">/* Data callback */</span></div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;  </div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;  RADIO_SetGlobalReceiveTimeout(RX_TIMEOUT_DATA);</div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;  </div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;  <span class="comment">/* Channel map configuration */</span></div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;  uint8_t map[5]= {0xFF,0xFF,0xFF,0xFF,0xFF};</div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;  RADIO_SetChannelMap(STATE_MACHINE_0, &amp;map[0]);</div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;  </div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;  <span class="comment">/* Set the channel */</span></div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;  RADIO_SetChannel(STATE_MACHINE_0, APP_CHANNEL, 0);</div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;</div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;  <span class="comment">/* Sets of the NetworkID and the CRC */</span></div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;  RADIO_SetTxAttributes(STATE_MACHINE_0, <a class="code" href="group___r_a_d_i_o___star_network.html#gaffc5a637a60c0a84ea24c189dec92952">networkID</a>[0], 0x555555);</div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;    </div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;  <span class="comment">/* Call these functions before execute the action packets */</span></div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;  RADIO_SetReservedArea(&amp;<a class="code" href="group___r_a_d_i_o___star_network.html#ga99921230dd0dc0f652517d307acf4f3c">sendmeAction</a>);</div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;  RADIO_SetReservedArea(&amp;<a class="code" href="group___r_a_d_i_o___star_network.html#gaf28be1425091b08ea2714db3512361ee">waitDataAction</a>);</div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;  RADIO_SetReservedArea(&amp;<a class="code" href="group___r_a_d_i_o___star_network.html#ga06014f65729666809598c43d620e4ea8">sendAckAction</a>);</div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;}</div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;</div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;<span class="keywordtype">void</span> <a class="code" href="group___r_a_d_i_o___automatic_ch_mgm.html#ga1730ffe1e560465665eb47d9264826f9">Error_Handler</a>(<span class="keywordtype">void</span>)</div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;{</div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;  <span class="comment">/* User can add his own implementation to report the HAL error return state */</span></div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;  <span class="keywordflow">while</span>(1) </div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;  {</div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;  }</div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;</div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;}</div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;</div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;<span class="preprocessor">#ifdef  USE_FULL_ASSERT</span></div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;</div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;<span class="keywordtype">void</span> assert_failed(uint8_t* file, uint32_t line)</div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;{ </div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;  <span class="comment">/* User can add his own implementation to report the file name and line number,</span></div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;<span class="comment">     ex: printf(&quot;Wrong parameters value: file %s on line %d\r\n&quot;, file, line) */</span></div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;</div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;  <span class="comment">/* Infinite loop */</span></div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;  <span class="keywordflow">while</span> (1)</div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;  {</div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;  }</div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;}</div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;</div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;</div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;<span class="comment">/******************* (C) COPYRIGHT 2017 STMicroelectronics *****END OF FILE****/</span></div>
<div class="ttc" id="group___r_a_d_i_o___star_network_html_ga9a35d37589cf8d1de75773518f09c695"><div class="ttname"><a href="group___r_a_d_i_o___star_network.html#ga9a35d37589cf8d1de75773518f09c695">sendmeBuffer</a></div><div class="ttdeci">uint8_t sendmeBuffer[2]</div><div class="ttdef"><b>Definition:</b> <a href="_r_a_d_i_o___star_network___master__main_8c_source.html#l00220">RADIO_StarNetwork_Master_main.c:220</a></div></div>
<div class="ttc" id="group___r_a_d_i_o___star_network_html_ga5e7146b8d2a7d821e35a202ab2c05da2"><div class="ttname"><a href="group___r_a_d_i_o___star_network.html#ga5e7146b8d2a7d821e35a202ab2c05da2">pkt_counter_test</a></div><div class="ttdeci">uint32_t pkt_counter_test[NSLAVES]</div><div class="ttdef"><b>Definition:</b> <a href="_r_a_d_i_o___star_network___master__main_8c_source.html#l00232">RADIO_StarNetwork_Master_main.c:232</a></div></div>
<div class="ttc" id="group___r_a_d_i_o___star_network_html_gaf05586da1114dabb604431c683b5ab8a"><div class="ttname"><a href="group___r_a_d_i_o___star_network.html#gaf05586da1114dabb604431c683b5ab8a">printer</a></div><div class="ttdeci">uint8_t printer</div><div class="ttdef"><b>Definition:</b> <a href="_r_a_d_i_o___star_network___master__main_8c_source.html#l00235">RADIO_StarNetwork_Master_main.c:235</a></div></div>
<div class="ttc" id="group___r_a_d_i_o___star_network_html_gab884287465dd2f6f94a0bd50f6c0f044"><div class="ttname"><a href="group___r_a_d_i_o___star_network.html#gab884287465dd2f6f94a0bd50f6c0f044">ackBuffer</a></div><div class="ttdeci">uint8_t ackBuffer[2]</div><div class="ttdef"><b>Definition:</b> <a href="_r_a_d_i_o___star_network___master__main_8c_source.html#l00222">RADIO_StarNetwork_Master_main.c:222</a></div></div>
<div class="ttc" id="group___micro___hello_world_html_ga840291bc02cba5474a4cb46a9b9566fe"><div class="ttname"><a href="group___micro___hello_world.html#ga840291bc02cba5474a4cb46a9b9566fe">main</a></div><div class="ttdeci">int main(void)</div><div class="ttdoc">Main program. </div><div class="ttdef"><b>Definition:</b> <a href="_micro___hello___world__main_8c_source.html#l00177">Micro_Hello_World_main.c:177</a></div></div>
<div class="ttc" id="group___r_a_d_i_o___star_network_html_gaffc5a637a60c0a84ea24c189dec92952"><div class="ttname"><a href="group___r_a_d_i_o___star_network.html#gaffc5a637a60c0a84ea24c189dec92952">networkID</a></div><div class="ttdeci">uint32_t networkID[NSLAVES]</div><div class="ttdef"><b>Definition:</b> <a href="_r_a_d_i_o___star_network___master__main_8c_source.html#l00224">RADIO_StarNetwork_Master_main.c:224</a></div></div>
<div class="ttc" id="group___r_a_d_i_o___star_network_html_ga99921230dd0dc0f652517d307acf4f3c"><div class="ttname"><a href="group___r_a_d_i_o___star_network.html#ga99921230dd0dc0f652517d307acf4f3c">sendmeAction</a></div><div class="ttdeci">ActionPacket sendmeAction</div><div class="ttdef"><b>Definition:</b> <a href="_r_a_d_i_o___star_network___master__main_8c_source.html#l00227">RADIO_StarNetwork_Master_main.c:227</a></div></div>
<div class="ttc" id="group___r_a_d_i_o___star_network_html_gaf28be1425091b08ea2714db3512361ee"><div class="ttname"><a href="group___r_a_d_i_o___star_network.html#gaf28be1425091b08ea2714db3512361ee">waitDataAction</a></div><div class="ttdeci">ActionPacket waitDataAction</div><div class="ttdef"><b>Definition:</b> <a href="_r_a_d_i_o___star_network___master__main_8c_source.html#l00226">RADIO_StarNetwork_Master_main.c:226</a></div></div>
<div class="ttc" id="group___r_a_d_i_o___star_network_html_ga49b0be536e22f4160eb843de6b46bbd5"><div class="ttname"><a href="group___r_a_d_i_o___star_network.html#ga49b0be536e22f4160eb843de6b46bbd5">retry</a></div><div class="ttdeci">uint8_t retry</div><div class="ttdef"><b>Definition:</b> <a href="_r_a_d_i_o___star_network___master__main_8c_source.html#l00234">RADIO_StarNetwork_Master_main.c:234</a></div></div>
<div class="ttc" id="group___r_a_d_i_o___star_network_html_gab0abfa067aa536bc1414f2194041d1c2"><div class="ttname"><a href="group___r_a_d_i_o___star_network.html#gab0abfa067aa536bc1414f2194041d1c2">comm_token</a></div><div class="ttdeci">uint8_t comm_token</div><div class="ttdef"><b>Definition:</b> <a href="_r_a_d_i_o___star_network___master__main_8c_source.html#l00219">RADIO_StarNetwork_Master_main.c:219</a></div></div>
<div class="ttc" id="group___r_a_d_i_o___star_network_html_ga36eb06957f4f22be88fc0a6c0a6af162"><div class="ttname"><a href="group___r_a_d_i_o___star_network.html#ga36eb06957f4f22be88fc0a6c0a6af162">pkt_lost_counter_test</a></div><div class="ttdeci">uint32_t pkt_lost_counter_test[NSLAVES]</div><div class="ttdef"><b>Definition:</b> <a href="_r_a_d_i_o___star_network___master__main_8c_source.html#l00233">RADIO_StarNetwork_Master_main.c:233</a></div></div>
<div class="ttc" id="group___r_a_d_i_o___automatic_ch_mgm_html_ga4ab3d8296ed358bb4bf35de68260beda"><div class="ttname"><a href="group___r_a_d_i_o___automatic_ch_mgm.html#ga4ab3d8296ed358bb4bf35de68260beda">dataRoutine</a></div><div class="ttdeci">uint8_t dataRoutine(ActionPacket *p, ActionPacket *next)</div><div class="ttdoc">Data routine. </div><div class="ttdef"><b>Definition:</b> <a href="_r_a_d_i_o___automatic_ch_mgm__main_8c_source.html#l00240">RADIO_AutomaticChMgm_main.c:240</a></div></div>
<div class="ttc" id="group___r_a_d_i_o___star_network_html_gaaaff8c7d7330beff54353f88451a4ec0"><div class="ttname"><a href="group___r_a_d_i_o___star_network.html#gaaaff8c7d7330beff54353f88451a4ec0">receiveBuffer</a></div><div class="ttdeci">uint8_t receiveBuffer[MAX_PACKET_LENGTH]</div><div class="ttdef"><b>Definition:</b> <a href="_r_a_d_i_o___star_network___master__main_8c_source.html#l00221">RADIO_StarNetwork_Master_main.c:221</a></div></div>
<div class="ttc" id="group___r_a_d_i_o___automatic_ch_mgm_html_ga1730ffe1e560465665eb47d9264826f9"><div class="ttname"><a href="group___r_a_d_i_o___automatic_ch_mgm.html#ga1730ffe1e560465665eb47d9264826f9">Error_Handler</a></div><div class="ttdeci">void Error_Handler(void)</div><div class="ttdoc">This function is executed in case of error occurrence. </div><div class="ttdef"><b>Definition:</b> <a href="_r_a_d_i_o___automatic_ch_mgm__main_8c_source.html#l00327">RADIO_AutomaticChMgm_main.c:327</a></div></div>
<div class="ttc" id="group___r_a_d_i_o___star_network_html_gacbb84ffbcdec6672fa67942836f6d544"><div class="ttname"><a href="group___r_a_d_i_o___star_network.html#gacbb84ffbcdec6672fa67942836f6d544">sendAckCB</a></div><div class="ttdeci">uint8_t sendAckCB(ActionPacket *p)</div><div class="ttdoc">Data routine. </div><div class="ttdef"><b>Definition:</b> <a href="_r_a_d_i_o___star_network___master__main_8c_source.html#l00289">RADIO_StarNetwork_Master_main.c:289</a></div></div>
<div class="ttc" id="group___r_a_d_i_o___star_network_html_gacc7a20d65d84175a11cc86831236ea15"><div class="ttname"><a href="group___r_a_d_i_o___star_network.html#gacc7a20d65d84175a11cc86831236ea15">waitDataCB</a></div><div class="ttdeci">uint8_t waitDataCB(ActionPacket *p)</div><div class="ttdef"><b>Definition:</b> <a href="_r_a_d_i_o___star_network___master__main_8c_source.html#l00260">RADIO_StarNetwork_Master_main.c:260</a></div></div>
<div class="ttc" id="group___r_a_d_i_o___star_network_html_ga06014f65729666809598c43d620e4ea8"><div class="ttname"><a href="group___r_a_d_i_o___star_network.html#ga06014f65729666809598c43d620e4ea8">sendAckAction</a></div><div class="ttdeci">ActionPacket sendAckAction</div><div class="ttdef"><b>Definition:</b> <a href="_r_a_d_i_o___star_network___master__main_8c_source.html#l00228">RADIO_StarNetwork_Master_main.c:228</a></div></div>
<div class="ttc" id="group___r_a_d_i_o___star_network_html_gad36508f85b383d4839e3d1965771b43c"><div class="ttname"><a href="group___r_a_d_i_o___star_network.html#gad36508f85b383d4839e3d1965771b43c">request_counter_test</a></div><div class="ttdeci">uint32_t request_counter_test[NSLAVES]</div><div class="ttdef"><b>Definition:</b> <a href="_r_a_d_i_o___star_network___master__main_8c_source.html#l00230">RADIO_StarNetwork_Master_main.c:230</a></div></div>
<div class="ttc" id="group___micro___power_manager_html_ga36faeb7c4630a53742da2e3a1d352bc4"><div class="ttname"><a href="group___micro___power_manager.html#ga36faeb7c4630a53742da2e3a1d352bc4">HS_STARTUP_TIME</a></div><div class="ttdeci">#define HS_STARTUP_TIME</div><div class="ttdef"><b>Definition:</b> <a href="_m_i_c_r_o___power_manager__main_8c_source.html#l00250">MICRO_PowerManager_main.c:250</a></div></div>
<div class="ttc" id="group___r_a_d_i_o___star_network_html_gac7b26e610448c50718409e63c3018db3"><div class="ttname"><a href="group___r_a_d_i_o___star_network.html#gac7b26e610448c50718409e63c3018db3">sendmeCB</a></div><div class="ttdeci">uint8_t sendmeCB(ActionPacket *p)</div><div class="ttdoc">Condition routine. </div><div class="ttdef"><b>Definition:</b> <a href="_r_a_d_i_o___star_network___master__main_8c_source.html#l00251">RADIO_StarNetwork_Master_main.c:251</a></div></div>
<div class="ttc" id="group___r_a_d_i_o___star_network_html_ga9112ed9353f1e9a1cd838e1d7ad98b60"><div class="ttname"><a href="group___r_a_d_i_o___star_network.html#ga9112ed9353f1e9a1cd838e1d7ad98b60">InitializationActionPackets</a></div><div class="ttdeci">void InitializationActionPackets(void)</div><div class="ttdef"><b>Definition:</b> <a href="_r_a_d_i_o___star_network___slave__main_8c_source.html#l00361">RADIO_StarNetwork_Slave_main.c:361</a></div></div>
</div><!-- fragment --></div><!-- contents -->
<!-- HTML footer for doxygen 1.8.10-->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Copyright &copy; 2022 by STMicrolectronics. All rights reserved.<br>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.10
</small></address>
</body>
</html>
