<!-- HTML header for doxygen 1.8.10-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.10"/>
<title>BlueNRG-LP/BlueNRG-LPS Peripherals drivers MIX Examples: RADIO_StarNetwork_Slave_main.c Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="STcustom.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="ST-logo-small.jpg"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">BlueNRG-LP/BlueNRG-LPS Peripherals drivers MIX Examples
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.10 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">RADIO_StarNetwork_Slave_main.c</div>  </div>
</div><!--header-->
<div class="contents">
<a href="_r_a_d_i_o___star_network___slave__main_8c.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;</div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment">/******************** (C) COPYRIGHT 2021 STMicroelectronics ********************</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment">* File Name          : RADIO_StarNetwork_Slave_main.c</span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment">* Author             : RF Application Team</span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment">* Version            : 1.0.0</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment">* Date               : 25-March-2019</span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment">* Description        : The code defines a Slave device in a star network. The Slave waits for a request of data from the Master. Once the request is received, then the Slave sends the data packet and waits for an ACK packet from the Master. The confirm the data reception of the Master. If the ACK packet is not received, then the Slave sends again the data packet to the Master. The Slave can send up to three packets of data to the Master if the ACK packet is not received.</span></div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment">********************************************************************************</span></div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment">* THE PRESENT FIRMWARE WHICH IS FOR GUIDANCE ONLY AIMS AT PROVIDING CUSTOMERS</span></div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment">* WITH CODING INFORMATION REGARDING THEIR PRODUCTS IN ORDER FOR THEM TO SAVE TIME.</span></div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment">* AS A RESULT, STMICROELECTRONICS SHALL NOT BE HELD LIABLE FOR ANY DIRECT,</span></div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment">* INDIRECT OR CONSEQUENTIAL DAMAGES WITH RESPECT TO ANY CLAIMS ARISING FROM THE</span></div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="comment">* CONTENT OF SUCH FIRMWARE AND/OR THE USE MADE BY CUSTOMERS OF THE CODING</span></div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="comment">* INFORMATION CONTAINED HEREIN IN CONNECTION WITH THEIR PRODUCTS.</span></div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="comment">*******************************************************************************/</span></div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;<span class="comment">/* Includes ------------------------------------------------------------------*/</span></div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;<span class="preprocessor">#include &lt;stdio.h&gt;</span></div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;<span class="preprocessor">#include &lt;string.h&gt;</span></div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;<span class="preprocessor">#include &quot;rf_driver_hal_vtimer.h&quot;</span></div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;<span class="preprocessor">#include &quot;rf_driver_hal_radio_2g4.h&quot;</span></div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;<span class="preprocessor">#include &quot;rf_driver_ll_radio_2g4.h&quot;</span></div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;<span class="preprocessor">#include &quot;bluenrg_lp_evb_config.h&quot;</span></div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;    </div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;<span class="preprocessor">#include &quot;main_common.h&quot;</span></div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;<span class="comment">/* Private typedef -----------------------------------------------------------*/</span></div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;<span class="comment">/* Private define ------------------------------------------------------------*/</span></div>
<div class="line"><a name="l00200"></a><span class="lineno"><a class="line" href="group___r_a_d_i_o___star_network.html#ga2abbb86f9becd74a07ea554221619486">  200</a></span>&#160;<span class="preprocessor">#define BLE_NETWORK_ID          SLAVE_ID</span></div>
<div class="line"><a name="l00201"></a><span class="lineno"><a class="line" href="group___r_a_d_i_o___star_network.html#gac74d6b8cc93ffc71a63bf5263ad4541b">  201</a></span>&#160;<span class="preprocessor">#define CALIBRATION_INTERVAL_CONF   10000</span></div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;<span class="preprocessor">#if defined CONFIG_HW_LS_RO  </span></div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;<span class="comment">/* Calibration must be done */</span></div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;<span class="preprocessor">#define INITIAL_CALIBRATION TRUE</span></div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;<span class="preprocessor">#define CALIBRATION_INTERVAL        CALIBRATION_INTERVAL_CONF</span></div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;<span class="preprocessor">#elif defined CONFIG_HW_LS_XTAL</span></div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;<span class="comment">/* No Calibration */</span></div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;<span class="preprocessor">#define INITIAL_CALIBRATION FALSE</span></div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;<span class="preprocessor">#define CALIBRATION_INTERVAL        0</span></div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;<span class="comment">/* Private macro -------------------------------------------------------------*/</span></div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;<span class="comment">/* Private variables ---------------------------------------------------------*/</span></div>
<div class="line"><a name="l00219"></a><span class="lineno"><a class="line" href="group___r_a_d_i_o___star_network.html#ga2054fe6229938f9c566c5a2b6d10ba45">  219</a></span>&#160;uint8_t <a class="code" href="group___r_a_d_i_o___star_network.html#ga2054fe6229938f9c566c5a2b6d10ba45">txDataBuffer</a>[62];</div>
<div class="line"><a name="l00220"></a><span class="lineno"><a class="line" href="group___r_a_d_i_o___star_network.html#gab884287465dd2f6f94a0bd50f6c0f044">  220</a></span>&#160;uint8_t <a class="code" href="group___r_a_d_i_o___star_network.html#gab884287465dd2f6f94a0bd50f6c0f044">ackBuffer</a>[2];</div>
<div class="line"><a name="l00221"></a><span class="lineno"><a class="line" href="group___r_a_d_i_o___star_network.html#gaaaff8c7d7330beff54353f88451a4ec0">  221</a></span>&#160;uint8_t <a class="code" href="group___r_a_d_i_o___star_network.html#gaaaff8c7d7330beff54353f88451a4ec0">receiveBuffer</a>[MAX_PACKET_LENGTH];</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;</div>
<div class="line"><a name="l00223"></a><span class="lineno"><a class="line" href="group___r_a_d_i_o___star_network.html#ga6776d748bd549ff2e05cda5309003a51">  223</a></span>&#160;ActionPacket <a class="code" href="group___r_a_d_i_o___star_network.html#ga6776d748bd549ff2e05cda5309003a51">waitRequestAction</a>;</div>
<div class="line"><a name="l00224"></a><span class="lineno"><a class="line" href="group___r_a_d_i_o___star_network.html#ga51146905130c08c656434d742e2cb33b">  224</a></span>&#160;ActionPacket <a class="code" href="group___r_a_d_i_o___star_network.html#ga51146905130c08c656434d742e2cb33b">sendDataAction</a>;</div>
<div class="line"><a name="l00225"></a><span class="lineno"><a class="line" href="group___r_a_d_i_o___star_network.html#ga7922e59f3cf4020ed89a0f8b09d6d21e">  225</a></span>&#160;ActionPacket <a class="code" href="group___r_a_d_i_o___star_network.html#ga7922e59f3cf4020ed89a0f8b09d6d21e">waitAckAction</a>;</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;</div>
<div class="line"><a name="l00227"></a><span class="lineno"><a class="line" href="group___r_a_d_i_o___star_network.html#ga7f56e0a301c79f876388ac4002aee08b">  227</a></span>&#160;uint16_t <a class="code" href="group___r_a_d_i_o___star_network.html#ga7f56e0a301c79f876388ac4002aee08b">pkt_counter_test</a> = 0;</div>
<div class="line"><a name="l00228"></a><span class="lineno"><a class="line" href="group___r_a_d_i_o___star_network.html#gabee3c3626c5f1711f3645497fd3682c1">  228</a></span>&#160;uint16_t <a class="code" href="group___r_a_d_i_o___star_network.html#gabee3c3626c5f1711f3645497fd3682c1">retry_counter_test</a> = 0;</div>
<div class="line"><a name="l00229"></a><span class="lineno"><a class="line" href="group___r_a_d_i_o___star_network.html#ga49b0be536e22f4160eb843de6b46bbd5">  229</a></span>&#160;uint8_t <a class="code" href="group___r_a_d_i_o___star_network.html#ga49b0be536e22f4160eb843de6b46bbd5">retry</a> = 0;</div>
<div class="line"><a name="l00230"></a><span class="lineno"><a class="line" href="group___r_a_d_i_o___star_network.html#ga70a622f1808eda2093093e2026713771">  230</a></span>&#160;uint16_t <a class="code" href="group___r_a_d_i_o___star_network.html#ga70a622f1808eda2093093e2026713771">ack_counter_test</a> = 0;</div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;<span class="comment">/* Private function prototypes -----------------------------------------------*/</span></div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;<span class="keywordtype">void</span> <a class="code" href="group___r_a_d_i_o___star_network.html#ga9112ed9353f1e9a1cd838e1d7ad98b60">InitializationActionPackets</a>(<span class="keywordtype">void</span>);</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;uint8_t <a class="code" href="group___r_a_d_i_o___star_network.html#ga4d1d9094c5723baea358c4bc79498929">waitRequestCB</a>(ActionPacket* p);</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;uint8_t <a class="code" href="group___r_a_d_i_o___star_network.html#gacfe0722b60909c249a2d1a69e442764e">sendDataCB</a>(ActionPacket* p);</div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;uint8_t <a class="code" href="group___r_a_d_i_o___star_network.html#gace63c6b9ed2cab6ba85e8728f176e785">waitAckCB</a>(ActionPacket* p);</div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;uint8_t <a class="code" href="group___r_a_d_i_o___star_network.html#ga4ab3d8296ed358bb4bf35de68260beda">dataRoutine</a>(ActionPacket* p,  ActionPacket* next);</div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;</div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;<span class="comment">/* Private functions ---------------------------------------------------------*/</span></div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;</div>
<div class="line"><a name="l00247"></a><span class="lineno"><a class="line" href="group___r_a_d_i_o___star_network.html#ga4d1d9094c5723baea358c4bc79498929">  247</a></span>&#160;uint8_t <a class="code" href="group___r_a_d_i_o___star_network.html#ga4d1d9094c5723baea358c4bc79498929">waitRequestCB</a>(ActionPacket* p)</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;{</div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;  <span class="comment">/* received a packet */</span></div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;  <span class="keywordflow">if</span>((p-&gt;status &amp; BLUE_INTERRUPT1REG_RCVOK) != 0) {</div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;    <span class="keywordflow">return</span> TRUE;</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;  }</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;  <span class="keywordflow">else</span> <span class="keywordflow">if</span>(((p-&gt;status &amp; BLUE_INTERRUPT1REG_RCVTIMEOUT) != 0) || ((p-&gt;status &amp; BLUE_INTERRUPT1REG_RCVCRCERR) != 0)) {</div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;    <span class="keywordflow">return</span> FALSE;</div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;  }</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;  <span class="keywordflow">return</span> FALSE;</div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;} </div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;</div>
<div class="line"><a name="l00259"></a><span class="lineno"><a class="line" href="group___r_a_d_i_o___star_network.html#gacfe0722b60909c249a2d1a69e442764e">  259</a></span>&#160;uint8_t <a class="code" href="group___r_a_d_i_o___star_network.html#gacfe0722b60909c249a2d1a69e442764e">sendDataCB</a>(ActionPacket* p)</div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;{</div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;  <span class="keywordflow">return</span> TRUE;</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;} </div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;</div>
<div class="line"><a name="l00264"></a><span class="lineno"><a class="line" href="group___r_a_d_i_o___star_network.html#gace63c6b9ed2cab6ba85e8728f176e785">  264</a></span>&#160;uint8_t <a class="code" href="group___r_a_d_i_o___star_network.html#gace63c6b9ed2cab6ba85e8728f176e785">waitAckCB</a>(ActionPacket* p)</div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;{</div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;  <span class="comment">/* received a packet */</span></div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;</div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;  <span class="keywordflow">if</span>((p-&gt;status &amp; BLUE_INTERRUPT1REG_RCVOK) != 0) {</div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;    <span class="keywordflow">return</span> TRUE;</div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;  }</div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;  <span class="keywordflow">else</span> <span class="keywordflow">if</span>(((p-&gt;status &amp; BLUE_INTERRUPT1REG_RCVTIMEOUT) != 0) || ((p-&gt;status &amp; BLUE_INTERRUPT1REG_RCVCRCERR) != 0)) {</div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;    <span class="keywordflow">if</span>(<a class="code" href="group___r_a_d_i_o___star_network.html#ga49b0be536e22f4160eb843de6b46bbd5">retry</a> &lt; MAX_RETRY_TEST) {</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;      <a class="code" href="group___r_a_d_i_o___star_network.html#ga49b0be536e22f4160eb843de6b46bbd5">retry</a>++;</div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;      <span class="keywordflow">return</span> FALSE;</div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;    }</div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;    <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;      <a class="code" href="group___r_a_d_i_o___star_network.html#ga49b0be536e22f4160eb843de6b46bbd5">retry</a> = 0;</div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;      <span class="keywordflow">return</span> TRUE;</div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;    }</div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;  }</div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;  </div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;  <span class="keywordflow">return</span> TRUE;</div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;}</div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;</div>
<div class="line"><a name="l00291"></a><span class="lineno"><a class="line" href="group___r_a_d_i_o___star_network.html#ga4ab3d8296ed358bb4bf35de68260beda">  291</a></span>&#160;uint8_t <a class="code" href="group___r_a_d_i_o___star_network.html#ga4ab3d8296ed358bb4bf35de68260beda">dataRoutine</a>(ActionPacket* p,  ActionPacket* next)</div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;{</div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;  <span class="keywordflow">if</span>( (p-&gt;status &amp; BLUE_INTERRUPT1REG_DONE) != 0) {</div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;    </div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;    <span class="comment">/* received a packet */</span></div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;    <span class="keywordflow">if</span>((p-&gt;status &amp; BLUE_STATUSREG_PREVTRANSMIT) == 0){</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;      </div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;      <span class="keywordflow">if</span>((p-&gt;status &amp; BLUE_INTERRUPT1REG_RCVOK) != 0) {    </div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;      }</div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;      <span class="keywordflow">else</span> <span class="keywordflow">if</span>((p-&gt;status &amp; BLUE_INTERRUPT1REG_RCVTIMEOUT) != 0) {</div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;      }</div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;      <span class="keywordflow">else</span> <span class="keywordflow">if</span>((p-&gt;status &amp; BLUE_INTERRUPT1REG_RCVCRCERR) != 0) {</div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;      }</div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;    }</div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;  }</div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;  <span class="keywordflow">return</span> TRUE;  </div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;}</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;</div>
<div class="line"><a name="l00315"></a><span class="lineno"><a class="line" href="group___r_a_d_i_o___star_network.html#ga840291bc02cba5474a4cb46a9b9566fe">  315</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="group___r_a_d_i_o___star_network.html#ga840291bc02cba5474a4cb46a9b9566fe">main</a>(<span class="keywordtype">void</span>)</div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;{ </div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;  HAL_VTIMER_InitType VTIMER_InitStruct = {<a class="code" href="group___micro___power_manager.html#ga36faeb7c4630a53742da2e3a1d352bc4">HS_STARTUP_TIME</a>, INITIAL_CALIBRATION, CALIBRATION_INTERVAL};</div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;  </div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;  <span class="comment">/* System initialization function */</span></div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;  <span class="keywordflow">if</span> (SystemInit(SYSCLK_64M, BLE_SYSCLK_32M) != SUCCESS) {</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;    <span class="comment">/* Error during system clock configuration take appropriate action */</span></div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;    <span class="keywordflow">while</span>(1);</div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;  }</div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;</div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;</div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;    </div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;  BSP_COM_Init(NULL);</div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;  BSP_LED_Init(BSP_LED1);</div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;  </div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;  RADIO_Init();</div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;  HAL_VTIMER_Init(&amp;VTIMER_InitStruct);</div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;  <span class="comment">/* Configures the transmit power level */</span></div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;  RADIO_SetTxPower(MAX_OUTPUT_RF_POWER);</div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;  </div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;  <span class="comment">/* Build data packet */</span></div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;  <a class="code" href="group___r_a_d_i_o___star_network.html#ga2054fe6229938f9c566c5a2b6d10ba45">txDataBuffer</a>[0] = 0x0;  <span class="comment">/* First byte */</span></div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;  <a class="code" href="group___r_a_d_i_o___star_network.html#ga2054fe6229938f9c566c5a2b6d10ba45">txDataBuffer</a>[1] = 60;   <span class="comment">/* Length position is fixed */</span></div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;  <span class="keywordflow">for</span>(uint8_t i=0; i != 60; i++) {</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;    <a class="code" href="group___r_a_d_i_o___star_network.html#ga2054fe6229938f9c566c5a2b6d10ba45">txDataBuffer</a>[i+2] = i;</div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;  }</div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;  </div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;  <span class="comment">/* Build ACK packet */</span></div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;  <a class="code" href="group___r_a_d_i_o___star_network.html#gab884287465dd2f6f94a0bd50f6c0f044">ackBuffer</a>[0] = 0xAE;</div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;  <a class="code" href="group___r_a_d_i_o___star_network.html#gab884287465dd2f6f94a0bd50f6c0f044">ackBuffer</a>[1] = 0;</div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;</div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;  <span class="comment">/* Initialize the routine for sending data and wait for the ACK */</span></div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;  <a class="code" href="group___r_a_d_i_o___star_network.html#ga9112ed9353f1e9a1cd838e1d7ad98b60">InitializationActionPackets</a>();</div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;  </div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;  <span class="comment">/* Call this function for the first action packet to be executed */</span></div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;  RADIO_MakeActionPacketPending(&amp;<a class="code" href="group___r_a_d_i_o___star_network.html#ga6776d748bd549ff2e05cda5309003a51">waitRequestAction</a>);</div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;  </div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;  <span class="comment">/* Infinite loop */</span></div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;  <span class="keywordflow">while</span>(1) {</div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;    HAL_VTIMER_Tick();</div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;  }   </div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;}</div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;</div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;</div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;</div>
<div class="line"><a name="l00361"></a><span class="lineno"><a class="line" href="group___r_a_d_i_o___star_network.html#ga9112ed9353f1e9a1cd838e1d7ad98b60">  361</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="group___r_a_d_i_o___star_network.html#ga9112ed9353f1e9a1cd838e1d7ad98b60">InitializationActionPackets</a>(<span class="keywordtype">void</span>)</div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;{</div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;  <span class="comment">/* Build Action Packets */</span></div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;  <a class="code" href="group___r_a_d_i_o___star_network.html#ga6776d748bd549ff2e05cda5309003a51">waitRequestAction</a>.StateMachineNo = STATE_MACHINE_0;</div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;  <a class="code" href="group___r_a_d_i_o___star_network.html#ga6776d748bd549ff2e05cda5309003a51">waitRequestAction</a>.ActionTag = RELATIVE | TIMER_WAKEUP | PLL_TRIG;</div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;  <a class="code" href="group___r_a_d_i_o___star_network.html#ga6776d748bd549ff2e05cda5309003a51">waitRequestAction</a>.WakeupTime = 30+WKP_OFFSET;           <span class="comment">/* 30 us minimum of internal delay before start action */</span></div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;  <a class="code" href="group___r_a_d_i_o___star_network.html#ga6776d748bd549ff2e05cda5309003a51">waitRequestAction</a>.MaxReceiveLength = MAX_LL_PACKET_LENGTH;</div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;  <a class="code" href="group___r_a_d_i_o___star_network.html#ga6776d748bd549ff2e05cda5309003a51">waitRequestAction</a>.data = <a class="code" href="group___r_a_d_i_o___star_network.html#gaaaff8c7d7330beff54353f88451a4ec0">receiveBuffer</a>;                 <span class="comment">/* Data to send */</span></div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;  <a class="code" href="group___r_a_d_i_o___star_network.html#ga6776d748bd549ff2e05cda5309003a51">waitRequestAction</a>.next_true = &amp;<a class="code" href="group___r_a_d_i_o___star_network.html#ga51146905130c08c656434d742e2cb33b">sendDataAction</a>;           <span class="comment">/* If condRoutine returns TRUE =&gt; Go to next TX the 2nd part of the payload */</span></div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;  <a class="code" href="group___r_a_d_i_o___star_network.html#ga6776d748bd549ff2e05cda5309003a51">waitRequestAction</a>.next_false = &amp;<a class="code" href="group___r_a_d_i_o___star_network.html#ga6776d748bd549ff2e05cda5309003a51">waitRequestAction</a>;       <span class="comment">/* Not Used */</span>   </div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;  <a class="code" href="group___r_a_d_i_o___star_network.html#ga6776d748bd549ff2e05cda5309003a51">waitRequestAction</a>.condRoutine = <a class="code" href="group___r_a_d_i_o___star_network.html#ga4d1d9094c5723baea358c4bc79498929">waitRequestCB</a>;          <span class="comment">/* Condition routine */</span></div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;  <a class="code" href="group___r_a_d_i_o___star_network.html#ga6776d748bd549ff2e05cda5309003a51">waitRequestAction</a>.dataRoutine = <a class="code" href="group___r_a_d_i_o___star_network.html#ga4ab3d8296ed358bb4bf35de68260beda">dataRoutine</a>;            <span class="comment">/* Data routine */</span></div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;</div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;  <a class="code" href="group___r_a_d_i_o___star_network.html#ga51146905130c08c656434d742e2cb33b">sendDataAction</a>.StateMachineNo = STATE_MACHINE_0;</div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;  <a class="code" href="group___r_a_d_i_o___star_network.html#ga51146905130c08c656434d742e2cb33b">sendDataAction</a>.ActionTag = RELATIVE | TIMER_WAKEUP | TXRX;</div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;  <a class="code" href="group___r_a_d_i_o___star_network.html#ga51146905130c08c656434d742e2cb33b">sendDataAction</a>.WakeupTime = 40+WKP_OFFSET;              <span class="comment">/* 40 us minimum of internal delay before start action */</span></div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;  <a class="code" href="group___r_a_d_i_o___star_network.html#ga51146905130c08c656434d742e2cb33b">sendDataAction</a>.MaxReceiveLength = 0;                    </div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;  <a class="code" href="group___r_a_d_i_o___star_network.html#ga51146905130c08c656434d742e2cb33b">sendDataAction</a>.data = <a class="code" href="group___r_a_d_i_o___star_network.html#ga2054fe6229938f9c566c5a2b6d10ba45">txDataBuffer</a>;                     <span class="comment">/* Buffer for ACK packet reception */</span></div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;  <a class="code" href="group___r_a_d_i_o___star_network.html#ga51146905130c08c656434d742e2cb33b">sendDataAction</a>.next_true = &amp;<a class="code" href="group___r_a_d_i_o___star_network.html#ga7922e59f3cf4020ed89a0f8b09d6d21e">waitAckAction</a>;               <span class="comment">/* Reschedule the RX */</span>   </div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;  <a class="code" href="group___r_a_d_i_o___star_network.html#ga51146905130c08c656434d742e2cb33b">sendDataAction</a>.next_false = &amp;<a class="code" href="group___r_a_d_i_o___star_network.html#ga7922e59f3cf4020ed89a0f8b09d6d21e">waitAckAction</a>;              <span class="comment">/* Reschedule the RX */</span>   </div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;  <a class="code" href="group___r_a_d_i_o___star_network.html#ga51146905130c08c656434d742e2cb33b">sendDataAction</a>.condRoutine = <a class="code" href="group___r_a_d_i_o___star_network.html#gacfe0722b60909c249a2d1a69e442764e">sendDataCB</a>;                <span class="comment">/* Condition routine */</span></div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;  <a class="code" href="group___r_a_d_i_o___star_network.html#ga51146905130c08c656434d742e2cb33b">sendDataAction</a>.dataRoutine = <a class="code" href="group___r_a_d_i_o___star_network.html#ga4ab3d8296ed358bb4bf35de68260beda">dataRoutine</a>;               <span class="comment">/* Data routine */</span></div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;  </div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;  <a class="code" href="group___r_a_d_i_o___star_network.html#ga7922e59f3cf4020ed89a0f8b09d6d21e">waitAckAction</a>.StateMachineNo = STATE_MACHINE_0;</div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;  <a class="code" href="group___r_a_d_i_o___star_network.html#ga7922e59f3cf4020ed89a0f8b09d6d21e">waitAckAction</a>.ActionTag = RELATIVE | TIMER_WAKEUP;</div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;  <a class="code" href="group___r_a_d_i_o___star_network.html#ga7922e59f3cf4020ed89a0f8b09d6d21e">waitAckAction</a>.WakeupTime = 30+WKP_OFFSET;              <span class="comment">/* 30 us minimum of internal delay before start action */</span></div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;  <a class="code" href="group___r_a_d_i_o___star_network.html#ga7922e59f3cf4020ed89a0f8b09d6d21e">waitAckAction</a>.MaxReceiveLength = MAX_LL_PACKET_LENGTH;  </div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;  <a class="code" href="group___r_a_d_i_o___star_network.html#ga7922e59f3cf4020ed89a0f8b09d6d21e">waitAckAction</a>.data = <a class="code" href="group___r_a_d_i_o___star_network.html#gaaaff8c7d7330beff54353f88451a4ec0">receiveBuffer</a>;                    <span class="comment">/* Buffer for ACK packet reception */</span></div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;  <a class="code" href="group___r_a_d_i_o___star_network.html#ga7922e59f3cf4020ed89a0f8b09d6d21e">waitAckAction</a>.next_true = &amp;<a class="code" href="group___r_a_d_i_o___star_network.html#ga6776d748bd549ff2e05cda5309003a51">waitRequestAction</a>;           <span class="comment">/* Reschedule the RX */</span>   </div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;  <a class="code" href="group___r_a_d_i_o___star_network.html#ga7922e59f3cf4020ed89a0f8b09d6d21e">waitAckAction</a>.next_false = &amp;<a class="code" href="group___r_a_d_i_o___star_network.html#ga51146905130c08c656434d742e2cb33b">sendDataAction</a>;             <span class="comment">/* Reschedule the RX */</span>   </div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;  <a class="code" href="group___r_a_d_i_o___star_network.html#ga7922e59f3cf4020ed89a0f8b09d6d21e">waitAckAction</a>.condRoutine = <a class="code" href="group___r_a_d_i_o___star_network.html#gace63c6b9ed2cab6ba85e8728f176e785">waitAckCB</a>;                 <span class="comment">/* Condition routine */</span></div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;  <a class="code" href="group___r_a_d_i_o___star_network.html#ga7922e59f3cf4020ed89a0f8b09d6d21e">waitAckAction</a>.dataRoutine = <a class="code" href="group___r_a_d_i_o___star_network.html#ga4ab3d8296ed358bb4bf35de68260beda">dataRoutine</a>;               <span class="comment">/* Data routine */</span></div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;  </div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;  RADIO_SetGlobalReceiveTimeout(RX_TIMEOUT_DATA);</div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;  </div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;  <span class="comment">/* Channel map configuration */</span></div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;  uint8_t map[5]= {0xFF,0xFF,0xFF,0xFF,0xFF};</div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;  RADIO_SetChannelMap(STATE_MACHINE_0, &amp;map[0]);</div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;  </div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;  <span class="comment">/* Set the channel */</span></div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;  RADIO_SetChannel(STATE_MACHINE_0, APP_CHANNEL, 0);</div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;</div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;  <span class="comment">/* Sets of the NetworkID and the CRC */</span></div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;  RADIO_SetTxAttributes(STATE_MACHINE_0, <a class="code" href="group___r_a_d_i_o___star_network.html#ga2abbb86f9becd74a07ea554221619486">BLE_NETWORK_ID</a>, 0x555555);</div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;    </div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;  <span class="comment">/* Call these functions before execute the action packets */</span></div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;  RADIO_SetReservedArea(&amp;<a class="code" href="group___r_a_d_i_o___star_network.html#ga6776d748bd549ff2e05cda5309003a51">waitRequestAction</a>);</div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;  RADIO_SetReservedArea(&amp;<a class="code" href="group___r_a_d_i_o___star_network.html#ga51146905130c08c656434d742e2cb33b">sendDataAction</a>);</div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;  RADIO_SetReservedArea(&amp;<a class="code" href="group___r_a_d_i_o___star_network.html#ga7922e59f3cf4020ed89a0f8b09d6d21e">waitAckAction</a>);</div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;}</div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;</div>
<div class="line"><a name="l00416"></a><span class="lineno"><a class="line" href="group___r_a_d_i_o___star_network.html#ga1730ffe1e560465665eb47d9264826f9">  416</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="group___r_a_d_i_o___star_network.html#ga1730ffe1e560465665eb47d9264826f9">Error_Handler</a>(<span class="keywordtype">void</span>)</div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;{</div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;  <span class="comment">/* User can add his own implementation to report the HAL error return state */</span></div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;  <span class="keywordflow">while</span>(1) </div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;  {</div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;  }</div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;</div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;}</div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;</div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;<span class="preprocessor">#ifdef  USE_FULL_ASSERT</span></div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;</div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;<span class="keywordtype">void</span> assert_failed(uint8_t* file, uint32_t line)</div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;{ </div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;  <span class="comment">/* User can add his own implementation to report the file name and line number,</span></div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;<span class="comment">     ex: printf(&quot;Wrong parameters value: file %s on line %d\r\n&quot;, file, line) */</span></div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;</div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;  <span class="comment">/* Infinite loop */</span></div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;  <span class="keywordflow">while</span> (1)</div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;  {</div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;  }</div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;}</div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;</div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;</div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;<span class="comment">/******************* (C) COPYRIGHT 2017 STMicroelectronics *****END OF FILE****/</span></div>
<div class="ttc" id="group___r_a_d_i_o___star_network_html_gace63c6b9ed2cab6ba85e8728f176e785"><div class="ttname"><a href="group___r_a_d_i_o___star_network.html#gace63c6b9ed2cab6ba85e8728f176e785">waitAckCB</a></div><div class="ttdeci">uint8_t waitAckCB(ActionPacket *p)</div><div class="ttdef"><b>Definition:</b> <a href="_r_a_d_i_o___star_network___slave__main_8c_source.html#l00264">RADIO_StarNetwork_Slave_main.c:264</a></div></div>
<div class="ttc" id="group___r_a_d_i_o___star_network_html_ga4d1d9094c5723baea358c4bc79498929"><div class="ttname"><a href="group___r_a_d_i_o___star_network.html#ga4d1d9094c5723baea358c4bc79498929">waitRequestCB</a></div><div class="ttdeci">uint8_t waitRequestCB(ActionPacket *p)</div><div class="ttdoc">Condition routine. </div><div class="ttdef"><b>Definition:</b> <a href="_r_a_d_i_o___star_network___slave__main_8c_source.html#l00247">RADIO_StarNetwork_Slave_main.c:247</a></div></div>
<div class="ttc" id="group___r_a_d_i_o___star_network_html_gab884287465dd2f6f94a0bd50f6c0f044"><div class="ttname"><a href="group___r_a_d_i_o___star_network.html#gab884287465dd2f6f94a0bd50f6c0f044">ackBuffer</a></div><div class="ttdeci">uint8_t ackBuffer[2]</div><div class="ttdef"><b>Definition:</b> <a href="_r_a_d_i_o___star_network___slave__main_8c_source.html#l00220">RADIO_StarNetwork_Slave_main.c:220</a></div></div>
<div class="ttc" id="group___r_a_d_i_o___star_network_html_ga70a622f1808eda2093093e2026713771"><div class="ttname"><a href="group___r_a_d_i_o___star_network.html#ga70a622f1808eda2093093e2026713771">ack_counter_test</a></div><div class="ttdeci">uint16_t ack_counter_test</div><div class="ttdef"><b>Definition:</b> <a href="_r_a_d_i_o___star_network___slave__main_8c_source.html#l00230">RADIO_StarNetwork_Slave_main.c:230</a></div></div>
<div class="ttc" id="group___r_a_d_i_o___star_network_html_gacfe0722b60909c249a2d1a69e442764e"><div class="ttname"><a href="group___r_a_d_i_o___star_network.html#gacfe0722b60909c249a2d1a69e442764e">sendDataCB</a></div><div class="ttdeci">uint8_t sendDataCB(ActionPacket *p)</div><div class="ttdef"><b>Definition:</b> <a href="_r_a_d_i_o___star_network___slave__main_8c_source.html#l00259">RADIO_StarNetwork_Slave_main.c:259</a></div></div>
<div class="ttc" id="group___r_a_d_i_o___star_network_html_ga840291bc02cba5474a4cb46a9b9566fe"><div class="ttname"><a href="group___r_a_d_i_o___star_network.html#ga840291bc02cba5474a4cb46a9b9566fe">main</a></div><div class="ttdeci">int main(void)</div><div class="ttdoc">Main program code. </div><div class="ttdef"><b>Definition:</b> <a href="_r_a_d_i_o___star_network___slave__main_8c_source.html#l00315">RADIO_StarNetwork_Slave_main.c:315</a></div></div>
<div class="ttc" id="group___r_a_d_i_o___star_network_html_ga6776d748bd549ff2e05cda5309003a51"><div class="ttname"><a href="group___r_a_d_i_o___star_network.html#ga6776d748bd549ff2e05cda5309003a51">waitRequestAction</a></div><div class="ttdeci">ActionPacket waitRequestAction</div><div class="ttdef"><b>Definition:</b> <a href="_r_a_d_i_o___star_network___slave__main_8c_source.html#l00223">RADIO_StarNetwork_Slave_main.c:223</a></div></div>
<div class="ttc" id="group___r_a_d_i_o___star_network_html_ga1730ffe1e560465665eb47d9264826f9"><div class="ttname"><a href="group___r_a_d_i_o___star_network.html#ga1730ffe1e560465665eb47d9264826f9">Error_Handler</a></div><div class="ttdeci">void Error_Handler(void)</div><div class="ttdoc">This function is executed in case of error occurrence. </div><div class="ttdef"><b>Definition:</b> <a href="_r_a_d_i_o___star_network___slave__main_8c_source.html#l00416">RADIO_StarNetwork_Slave_main.c:416</a></div></div>
<div class="ttc" id="group___r_a_d_i_o___star_network_html_ga2054fe6229938f9c566c5a2b6d10ba45"><div class="ttname"><a href="group___r_a_d_i_o___star_network.html#ga2054fe6229938f9c566c5a2b6d10ba45">txDataBuffer</a></div><div class="ttdeci">uint8_t txDataBuffer[62]</div><div class="ttdef"><b>Definition:</b> <a href="_r_a_d_i_o___star_network___slave__main_8c_source.html#l00219">RADIO_StarNetwork_Slave_main.c:219</a></div></div>
<div class="ttc" id="group___r_a_d_i_o___star_network_html_ga49b0be536e22f4160eb843de6b46bbd5"><div class="ttname"><a href="group___r_a_d_i_o___star_network.html#ga49b0be536e22f4160eb843de6b46bbd5">retry</a></div><div class="ttdeci">uint8_t retry</div><div class="ttdef"><b>Definition:</b> <a href="_r_a_d_i_o___star_network___slave__main_8c_source.html#l00229">RADIO_StarNetwork_Slave_main.c:229</a></div></div>
<div class="ttc" id="group___r_a_d_i_o___star_network_html_ga4ab3d8296ed358bb4bf35de68260beda"><div class="ttname"><a href="group___r_a_d_i_o___star_network.html#ga4ab3d8296ed358bb4bf35de68260beda">dataRoutine</a></div><div class="ttdeci">uint8_t dataRoutine(ActionPacket *p, ActionPacket *next)</div><div class="ttdoc">Data routine. </div><div class="ttdef"><b>Definition:</b> <a href="_r_a_d_i_o___star_network___slave__main_8c_source.html#l00291">RADIO_StarNetwork_Slave_main.c:291</a></div></div>
<div class="ttc" id="group___r_a_d_i_o___star_network_html_gabee3c3626c5f1711f3645497fd3682c1"><div class="ttname"><a href="group___r_a_d_i_o___star_network.html#gabee3c3626c5f1711f3645497fd3682c1">retry_counter_test</a></div><div class="ttdeci">uint16_t retry_counter_test</div><div class="ttdef"><b>Definition:</b> <a href="_r_a_d_i_o___star_network___slave__main_8c_source.html#l00228">RADIO_StarNetwork_Slave_main.c:228</a></div></div>
<div class="ttc" id="group___r_a_d_i_o___star_network_html_ga7922e59f3cf4020ed89a0f8b09d6d21e"><div class="ttname"><a href="group___r_a_d_i_o___star_network.html#ga7922e59f3cf4020ed89a0f8b09d6d21e">waitAckAction</a></div><div class="ttdeci">ActionPacket waitAckAction</div><div class="ttdef"><b>Definition:</b> <a href="_r_a_d_i_o___star_network___slave__main_8c_source.html#l00225">RADIO_StarNetwork_Slave_main.c:225</a></div></div>
<div class="ttc" id="group___r_a_d_i_o___star_network_html_gaaaff8c7d7330beff54353f88451a4ec0"><div class="ttname"><a href="group___r_a_d_i_o___star_network.html#gaaaff8c7d7330beff54353f88451a4ec0">receiveBuffer</a></div><div class="ttdeci">uint8_t receiveBuffer[MAX_PACKET_LENGTH]</div><div class="ttdef"><b>Definition:</b> <a href="_r_a_d_i_o___star_network___slave__main_8c_source.html#l00221">RADIO_StarNetwork_Slave_main.c:221</a></div></div>
<div class="ttc" id="group___r_a_d_i_o___star_network_html_ga51146905130c08c656434d742e2cb33b"><div class="ttname"><a href="group___r_a_d_i_o___star_network.html#ga51146905130c08c656434d742e2cb33b">sendDataAction</a></div><div class="ttdeci">ActionPacket sendDataAction</div><div class="ttdef"><b>Definition:</b> <a href="_r_a_d_i_o___star_network___slave__main_8c_source.html#l00224">RADIO_StarNetwork_Slave_main.c:224</a></div></div>
<div class="ttc" id="group___micro___power_manager_html_ga36faeb7c4630a53742da2e3a1d352bc4"><div class="ttname"><a href="group___micro___power_manager.html#ga36faeb7c4630a53742da2e3a1d352bc4">HS_STARTUP_TIME</a></div><div class="ttdeci">#define HS_STARTUP_TIME</div><div class="ttdef"><b>Definition:</b> <a href="_m_i_c_r_o___power_manager__main_8c_source.html#l00250">MICRO_PowerManager_main.c:250</a></div></div>
<div class="ttc" id="group___r_a_d_i_o___star_network_html_ga2abbb86f9becd74a07ea554221619486"><div class="ttname"><a href="group___r_a_d_i_o___star_network.html#ga2abbb86f9becd74a07ea554221619486">BLE_NETWORK_ID</a></div><div class="ttdeci">#define BLE_NETWORK_ID</div><div class="ttdef"><b>Definition:</b> <a href="_r_a_d_i_o___star_network___slave__main_8c_source.html#l00200">RADIO_StarNetwork_Slave_main.c:200</a></div></div>
<div class="ttc" id="group___r_a_d_i_o___star_network_html_ga7f56e0a301c79f876388ac4002aee08b"><div class="ttname"><a href="group___r_a_d_i_o___star_network.html#ga7f56e0a301c79f876388ac4002aee08b">pkt_counter_test</a></div><div class="ttdeci">uint16_t pkt_counter_test</div><div class="ttdef"><b>Definition:</b> <a href="_r_a_d_i_o___star_network___slave__main_8c_source.html#l00227">RADIO_StarNetwork_Slave_main.c:227</a></div></div>
<div class="ttc" id="group___r_a_d_i_o___star_network_html_ga9112ed9353f1e9a1cd838e1d7ad98b60"><div class="ttname"><a href="group___r_a_d_i_o___star_network.html#ga9112ed9353f1e9a1cd838e1d7ad98b60">InitializationActionPackets</a></div><div class="ttdeci">void InitializationActionPackets(void)</div><div class="ttdef"><b>Definition:</b> <a href="_r_a_d_i_o___star_network___slave__main_8c_source.html#l00361">RADIO_StarNetwork_Slave_main.c:361</a></div></div>
</div><!-- fragment --></div><!-- contents -->
<!-- HTML footer for doxygen 1.8.10-->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Copyright &copy; 2022 by STMicrolectronics. All rights reserved.<br>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.10
</small></address>
</body>
</html>
