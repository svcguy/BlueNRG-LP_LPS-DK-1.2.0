<!-- HTML header for doxygen 1.8.10-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.10"/>
<title>BlueNRG-LP/BlueNRG-LPS Peripherals HAL drivers APIs: rf_driver_hal_power_manager.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="ST-logo-small.jpg"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">BlueNRG-LP/BlueNRG-LPS Peripherals HAL drivers APIs
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.10 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#enum-members">Enumerations</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">rf_driver_hal_power_manager.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Header file for the power save manager.  
<a href="#details">More...</a></p>

<p><a href="rf__driver__hal__power__manager_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_wakeup_source_config___type_def.html">WakeupSourceConfig_TypeDef</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Wakeup Sosurce Configuration Structure definition.  <a href="struct_wakeup_source_config___type_def.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="enum-members"></a>
Enumerations</h2></td></tr>
<tr class="memitem:add9f92e98a807cfb0e333c872ef9efcf"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rf__driver__hal__power__manager_8h.html#add9f92e98a807cfb0e333c872ef9efcf">PowerSaveLevels</a> { <a class="el" href="rf__driver__hal__power__manager_8h.html#add9f92e98a807cfb0e333c872ef9efcfaeafc7333ffe256c40f870bdff21c37a6">POWER_SAVE_LEVEL_RUNNING</a> = 0, 
<a class="el" href="rf__driver__hal__power__manager_8h.html#add9f92e98a807cfb0e333c872ef9efcfa312209c92137a192fe7401659ce5b724">POWER_SAVE_LEVEL_CPU_HALT</a> = 1, 
<a class="el" href="rf__driver__hal__power__manager_8h.html#add9f92e98a807cfb0e333c872ef9efcfac1bf6cc2a949d3871bf162e52c94a61d">POWER_SAVE_LEVEL_STOP_WITH_TIMER</a> = 2, 
<a class="el" href="rf__driver__hal__power__manager_8h.html#add9f92e98a807cfb0e333c872ef9efcfa80e18846af13b0366b30c4467fede427">POWER_SAVE_LEVEL_STOP_NOTIMER</a> = 3
 }<tr class="memdesc:add9f92e98a807cfb0e333c872ef9efcf"><td class="mdescLeft">&#160;</td><td class="mdescRight">Enumerations for the possible microcontroller power save levels.  <a href="rf__driver__hal__power__manager_8h.html#add9f92e98a807cfb0e333c872ef9efcf">More...</a><br /></td></tr>
<tr class="separator:add9f92e98a807cfb0e333c872ef9efcf"><td class="memSeparator" colspan="2">&#160;</td></tr>
</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a17d0d7f0616e1de6c7869dbcb3aca8c9"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rf__driver__hal__power__manager_8h.html#a17d0d7f0616e1de6c7869dbcb3aca8c9">HAL_PWR_MNGR_Request</a> (<a class="el" href="rf__driver__hal__power__manager_8h.html#add9f92e98a807cfb0e333c872ef9efcf">PowerSaveLevels</a> level, <a class="el" href="struct_wakeup_source_config___type_def.html">WakeupSourceConfig_TypeDef</a> wsConfig, <a class="el" href="rf__driver__hal__power__manager_8h.html#add9f92e98a807cfb0e333c872ef9efcf">PowerSaveLevels</a> *negotiatedLevel)</td></tr>
<tr class="memdesc:a17d0d7f0616e1de6c7869dbcb3aca8c9"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function allows to put the device in low power state.  <a href="#a17d0d7f0616e1de6c7869dbcb3aca8c9">More...</a><br /></td></tr>
<tr class="separator:a17d0d7f0616e1de6c7869dbcb3aca8c9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9d6747dac8f12876fd80c4435590e4a0"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rf__driver__hal__power__manager_8h.html#a9d6747dac8f12876fd80c4435590e4a0">HAL_PWR_MNGR_ShutdownRequest</a> (uint8_t BOR_enabled)</td></tr>
<tr class="memdesc:a9d6747dac8f12876fd80c4435590e4a0"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function allows to put the device in shutdown.  <a href="#a9d6747dac8f12876fd80c4435590e4a0">More...</a><br /></td></tr>
<tr class="separator:a9d6747dac8f12876fd80c4435590e4a0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0db73ee2c51dfdd3c77528240309f66d"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rf__driver__hal__power__manager_8h.html#a0db73ee2c51dfdd3c77528240309f66d">HAL_PWR_MNGR_WakeupSource</a> (void)</td></tr>
<tr class="memdesc:a0db73ee2c51dfdd3c77528240309f66d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return the wakeup source from power save.  <a href="#a0db73ee2c51dfdd3c77528240309f66d">More...</a><br /></td></tr>
<tr class="separator:a0db73ee2c51dfdd3c77528240309f66d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a564c3db407f47900e661706ec6cbe08c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rf__driver__hal__power__manager_8h.html#a564c3db407f47900e661706ec6cbe08c">HAL_PWR_MNGR_ClearWakeupSource</a> (uint32_t source)</td></tr>
<tr class="memdesc:a564c3db407f47900e661706ec6cbe08c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Clear the wakeup source information.  <a href="#a564c3db407f47900e661706ec6cbe08c">More...</a><br /></td></tr>
<tr class="separator:a564c3db407f47900e661706ec6cbe08c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abf0dc20557f84fbd22ad6c06e612d663"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rf__driver__hal__power__manager_8h.html#abf0dc20557f84fbd22ad6c06e612d663">HAL_PWR_MNGR_WakeupIOCallback</a> (uint32_t source)</td></tr>
<tr class="memdesc:abf0dc20557f84fbd22ad6c06e612d663"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets an user callback that will be executed at the end of the wakeup context restore. This callback will be executed if an IO is a wakeup source.  <a href="#abf0dc20557f84fbd22ad6c06e612d663">More...</a><br /></td></tr>
<tr class="separator:abf0dc20557f84fbd22ad6c06e612d663"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a76300e6dd2c2a3ba91a180ff9dbfb91e"><td class="memItemLeft" align="right" valign="top"><a class="el" href="rf__driver__hal__power__manager_8h.html#add9f92e98a807cfb0e333c872ef9efcf">PowerSaveLevels</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rf__driver__hal__power__manager_8h.html#a76300e6dd2c2a3ba91a180ff9dbfb91e">App_PowerSaveLevel_Check</a> (<a class="el" href="rf__driver__hal__power__manager_8h.html#add9f92e98a807cfb0e333c872ef9efcf">PowerSaveLevels</a> level)</td></tr>
<tr class="memdesc:a76300e6dd2c2a3ba91a180ff9dbfb91e"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function allows the application to define its desired power save level.  <a href="#a76300e6dd2c2a3ba91a180ff9dbfb91e">More...</a><br /></td></tr>
<tr class="separator:a76300e6dd2c2a3ba91a180ff9dbfb91e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4d2195aed1bb036252d5d53832f85da0"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rf__driver__hal__power__manager_8h.html#a4d2195aed1bb036252d5d53832f85da0">HAL_PWR_MNGR_DeepstopWdgState</a> (FunctionalState state)</td></tr>
<tr class="memdesc:a4d2195aed1bb036252d5d53832f85da0"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function configures the watchdog peripheral state during the DEEPSTOP period. The state allowed for the watchodg during DEEPSTOP can be enabled or disabled.  <a href="#a4d2195aed1bb036252d5d53832f85da0">More...</a><br /></td></tr>
<tr class="separator:a4d2195aed1bb036252d5d53832f85da0"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Header file for the power save manager. </p>
<dl class="section author"><dt>Author</dt><dd>AMG - RF-Application Team </dd></dl>
<dl class="section version"><dt>Version</dt><dd>V1.0.0 </dd></dl>
<dl class="section date"><dt>Date</dt><dd>21-December-2020 </dd></dl>
<dl class="section attention"><dt>Attention</dt><dd></dd></dl>
<p>THE PRESENT FIRMWARE WHICH IS FOR GUIDANCE ONLY AIMS AT PROVIDING CUSTOMERS WITH CODING INFORMATION REGARDING THEIR PRODUCTS IN ORDER FOR THEM TO SAVE TIME. AS A RESULT, STMICROELECTRONICS SHALL NOT BE HELD LIABLE FOR ANY DIRECT, INDIRECT OR CONSEQUENTIAL DAMAGES WITH RESPECT TO ANY CLAIMS ARISING FROM THE CONTENT OF SUCH FIRMWARE AND/OR THE USE MADE BY CUSTOMERS OF THE CODING INFORMATION CONTAINED HEREIN IN CONNECTION WITH THEIR PRODUCTS.</p>
<h2><center>&copy; COPYRIGHT 2019 STMicroelectronics</center></h2>

<p>Definition in file <a class="el" href="rf__driver__hal__power__manager_8h_source.html">rf_driver_hal_power_manager.h</a>.</p>
</div><h2 class="groupheader">Enumeration Type Documentation</h2>
<a class="anchor" id="add9f92e98a807cfb0e333c872ef9efcf"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="rf__driver__hal__power__manager_8h.html#add9f92e98a807cfb0e333c872ef9efcf">PowerSaveLevels</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Enumerations for the possible microcontroller power save levels. </p>
<ul>
<li>POWER_SAVE_LEVEL_RUNNING Everything is active and running.</li>
<li>POWER_SAVE_LEVEL_CPU_HALT Only the CPU is halted. The rest of the chip continues running normally. The chip will wake from any interrupt.</li>
<li>POWER_SAVE_LEVEL_STOP_WITH_TIMER The device is in deep sleep and the timer clock sources (LSI or LSE) remain running. Wakeup is possible from all IOs enabled for this scope, RTC, IWDG, LPUART (BlueNRG-LPS), radio IP and the Hal Virtual Timers.</li>
<li>POWER_SAVE_LEVEL_STOP_NOTIMER The device is in deep sleep. All the peripherals and clock sources are turned off. Wakeup is possible only from IOs enabled for this scope. </li>
</ul>
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a class="anchor" id="add9f92e98a807cfb0e333c872ef9efcfaeafc7333ffe256c40f870bdff21c37a6"></a>POWER_SAVE_LEVEL_RUNNING&#160;</td><td class="fielddoc">
</td></tr>
<tr><td class="fieldname"><a class="anchor" id="add9f92e98a807cfb0e333c872ef9efcfa312209c92137a192fe7401659ce5b724"></a>POWER_SAVE_LEVEL_CPU_HALT&#160;</td><td class="fielddoc">
</td></tr>
<tr><td class="fieldname"><a class="anchor" id="add9f92e98a807cfb0e333c872ef9efcfac1bf6cc2a949d3871bf162e52c94a61d"></a>POWER_SAVE_LEVEL_STOP_WITH_TIMER&#160;</td><td class="fielddoc">
</td></tr>
<tr><td class="fieldname"><a class="anchor" id="add9f92e98a807cfb0e333c872ef9efcfa80e18846af13b0366b30c4467fede427"></a>POWER_SAVE_LEVEL_STOP_NOTIMER&#160;</td><td class="fielddoc">
</td></tr>
</table>

<p>Definition at line <a class="el" href="rf__driver__hal__power__manager_8h_source.html#l00044">44</a> of file <a class="el" href="rf__driver__hal__power__manager_8h_source.html">rf_driver_hal_power_manager.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="a76300e6dd2c2a3ba91a180ff9dbfb91e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="rf__driver__hal__power__manager_8h.html#add9f92e98a807cfb0e333c872ef9efcf">PowerSaveLevels</a> App_PowerSaveLevel_Check </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="rf__driver__hal__power__manager_8h.html#add9f92e98a807cfb0e333c872ef9efcf">PowerSaveLevels</a>&#160;</td>
          <td class="paramname"><em>level</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function allows the application to define its desired power save level. </p>
<p>The App_PowerSaveLevel_Check allows the application to set its desired power save level based on the application power management policy. When user calls <a class="el" href="rf__driver__hal__power__manager_8c.html#a17d0d7f0616e1de6c7869dbcb3aca8c9">HAL_PWR_MNGR_Request</a>, a negotiation occurs to define the power save level and this function is called to get inputs from application. It is important to notice that this function is executed with interrupts disabled</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">level</td><td>Power save level (see PowerSaveLevels enum)</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">Return</td><td>the Power save level possible and safe from the application point of view</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>A weak implementation always returning POWER_SAVE_LEVEL_STOP_NOTIMER is provided as default when no application specifc behaviour is required. </dd></dl>

</div>
</div>
<a class="anchor" id="a564c3db407f47900e661706ec6cbe08c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void HAL_PWR_MNGR_ClearWakeupSource </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>source</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Clear the wakeup source information. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">source</td><td>Wakeup source to clear, the parameter can be a combination of the following values:<ul>
<li>WAKEUP_RTC</li>
<li>WAKEUP_LPU</li>
<li>WAKEUP_BLE_HOST_TIMER</li>
<li>WAKEUP_BLE</li>
<li>WAKEUP_PA15</li>
<li>WAKEUP_PA14</li>
<li>WAKEUP_PA13</li>
<li>WAKEUP_PA12</li>
<li>WAKEUP_PA11</li>
<li>WAKEUP_PA10</li>
<li>WAKEUP_PA9</li>
<li>WAKEUP_PA8</li>
<li>WAKEUP_PA7</li>
<li>WAKEUP_PA6</li>
<li>WAKEUP_PA5</li>
<li>WAKEUP_PA4</li>
<li>WAKEUP_PA3</li>
<li>WAKEUP_PA2</li>
<li>WAKEUP_PA1</li>
<li>WAKEUP_PA0</li>
<li>WAKEUP_PB15</li>
<li>WAKEUP_PB14</li>
<li>WAKEUP_PB13</li>
<li>WAKEUP_PB12</li>
<li>WAKEUP_PB11</li>
<li>WAKEUP_PB10</li>
<li>WAKEUP_PB9</li>
<li>WAKEUP_PB8</li>
<li>WAKEUP_PB7</li>
<li>WAKEUP_PB6</li>
<li>WAKEUP_PB5</li>
<li>WAKEUP_PB4</li>
<li>WAKEUP_PB3</li>
<li>WAKEUP_PB2</li>
<li>WAKEUP_PB1</li>
<li>WAKEUP_PB0</li>
<li>ALL_WAKEUP_SOURCE </li>
</ul>
</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">None</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>Refer the wakeup source declaration to see if are supported from the device </dd></dl>

<p>Definition at line <a class="el" href="rf__driver__hal__power__manager_8c_source.html#l01182">1182</a> of file <a class="el" href="rf__driver__hal__power__manager_8c_source.html">rf_driver_hal_power_manager.c</a>.</p>

</div>
</div>
<a class="anchor" id="a4d2195aed1bb036252d5d53832f85da0"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void HAL_PWR_MNGR_DeepstopWdgState </td>
          <td>(</td>
          <td class="paramtype">FunctionalState&#160;</td>
          <td class="paramname"><em>state</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function configures the watchdog peripheral state during the DEEPSTOP period. The state allowed for the watchodg during DEEPSTOP can be enabled or disabled. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">state</td><td>ENABLE/DISABLE</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">None</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>This API does not configure the watchdog peripehral. It sets the WDG state during the deepstop period according the application request. If the WDG is running and this API is not called, the power manager library takes the decision to leave the WDG enabled during DEEPSTOP period. </dd></dl>

<p>Definition at line <a class="el" href="rf__driver__hal__power__manager_8c_source.html#l01193">1193</a> of file <a class="el" href="rf__driver__hal__power__manager_8c_source.html">rf_driver_hal_power_manager.c</a>.</p>

</div>
</div>
<a class="anchor" id="a17d0d7f0616e1de6c7869dbcb3aca8c9"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t HAL_PWR_MNGR_Request </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="rf__driver__hal__power__manager_8h.html#add9f92e98a807cfb0e333c872ef9efcf">PowerSaveLevels</a>&#160;</td>
          <td class="paramname"><em>level</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_wakeup_source_config___type_def.html">WakeupSourceConfig_TypeDef</a>&#160;</td>
          <td class="paramname"><em>wsConfig</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="rf__driver__hal__power__manager_8h.html#add9f92e98a807cfb0e333c872ef9efcf">PowerSaveLevels</a> *&#160;</td>
          <td class="paramname"><em>negotiatedLevel</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function allows to put the device in low power state. </p>
<p>This function allows to enter a desired power save level that is negotiated between Radio stack needs, CPU Host Timer needs and application needs. The application can provide the desired power save level using the parameter mode. In addition to this, the application can optionally use the <a class="el" href="rf__driver__hal__power__manager_8h.html#a76300e6dd2c2a3ba91a180ff9dbfb91e">App_PowerSaveLevel_Check</a> to provide its desired power save level. The function will compute the power save level by combining the different requests and choosing the lowest possible power save level mode.</p>
<p>The device can be configured with different wake sources according to the mode parameter. The lowest power save level is obtained configuring the device in POWER_SAVE_MODE_SHUTDOWN, but in this case the only wakeup source is a low pulse on the RSTN pad, so, no smart power management is in place, because there is no memory retention in this power save level configuration. For all power save levels, <a class="el" href="rf__driver__hal__power__manager_8h.html#a17d0d7f0616e1de6c7869dbcb3aca8c9" title="This function allows to put the device in low power state. ">HAL_PWR_MNGR_Request()</a> will return when the wakeup occours.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir"></td><td class="paramname">level</td><td>Power save level (see PowerSaveLevels enum)</td></tr>
    <tr><td class="paramdir"></td><td class="paramname">wsConfig</td><td>this is the wakeup sources configuration (<a class="el" href="struct_wakeup_source_config___type_def.html">WakeupSourceConfig_TypeDef</a> structure)</td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">negotiatedLevel</td><td>This parameter returns the negotiated power save level really applied.</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">SUCCESS</td><td>or error code </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="rf__driver__hal__power__manager_8c_source.html#l01001">1001</a> of file <a class="el" href="rf__driver__hal__power__manager_8c_source.html">rf_driver_hal_power_manager.c</a>.</p>

</div>
</div>
<a class="anchor" id="a9d6747dac8f12876fd80c4435590e4a0"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t HAL_PWR_MNGR_ShutdownRequest </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>BOR_enabled</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function allows to put the device in shutdown. </p>
<p>This function allows to put the device in shutdown mode, this is the least power consuming mode. The only wakeup source is a low pulse on the RSTN pad. The conditions to enter the Shutdown mode are:</p><ul>
<li>the radio is sleeping,</li>
<li>the CPU is sleeping (WFI with SLEEPDEEP information active) A Shutdown exit is similar to a POR startup of the board. The associated reset reason is the PORRSTF flag The BOR feature may be enabled or disabled during SHUTDOWN mode.</li>
</ul>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">BOR_enabled</td><td>if TRUE the BOR is enabled during Shutdown mode, otherwise it is disabled.</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">ERROR</td><td>if for some reason the device not allow the Shutdown mode.</td></tr>
  </table>
  </dd>
</dl>
<p>Note: The application never read SUCCESS like return value because a POR happens at wakeup </p>

<p>Definition at line <a class="el" href="rf__driver__hal__power__manager_8c_source.html#l01130">1130</a> of file <a class="el" href="rf__driver__hal__power__manager_8c_source.html">rf_driver_hal_power_manager.c</a>.</p>

</div>
</div>
<a class="anchor" id="abf0dc20557f84fbd22ad6c06e612d663"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void HAL_PWR_MNGR_WakeupIOCallback </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>source</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Sets an user callback that will be executed at the end of the wakeup context restore. This callback will be executed if an IO is a wakeup source. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">source</td><td>Wakeup source in the last power save cycle. The parameter can be a combination of the following values:<ul>
<li>WAKEUP_PA15</li>
<li>WAKEUP_PA14</li>
<li>WAKEUP_PA13</li>
<li>WAKEUP_PA12</li>
<li>WAKEUP_PA11</li>
<li>WAKEUP_PA10</li>
<li>WAKEUP_PA9</li>
<li>WAKEUP_PA8</li>
<li>WAKEUP_PA7</li>
<li>WAKEUP_PA6</li>
<li>WAKEUP_PA5</li>
<li>WAKEUP_PA4</li>
<li>WAKEUP_PA3</li>
<li>WAKEUP_PA2</li>
<li>WAKEUP_PA1</li>
<li>WAKEUP_PA0</li>
<li>WAKEUP_PB15</li>
<li>WAKEUP_PB14</li>
<li>WAKEUP_PB13</li>
<li>WAKEUP_PB12</li>
<li>WAKEUP_PB11</li>
<li>WAKEUP_PB10</li>
<li>WAKEUP_PB9</li>
<li>WAKEUP_PB8</li>
<li>WAKEUP_PB7</li>
<li>WAKEUP_PB6</li>
<li>WAKEUP_PB5</li>
<li>WAKEUP_PB4</li>
<li>WAKEUP_PB3</li>
<li>WAKEUP_PB2</li>
<li>WAKEUP_PB1</li>
<li>WAKEUP_PB0</li>
<li>ALL_WAKEUP_SOURCE </li>
</ul>
</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">None</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>This function should be used if an interrupt is associated to the IO wakeup source. The device during the DEEPSTOP period has the GPIO peripherals disabled. So, if a signal variation happens in a IO pin, the device will be woke up but the associated interrupt to the line is lost because the peripheral is not clocked and configured before the context restore. To serve this interrupt the application shall add the GPIO IRQ code inside this user callback. Refer the wakeup source declaration to see if are supported from the device </dd></dl>

</div>
</div>
<a class="anchor" id="a0db73ee2c51dfdd3c77528240309f66d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t HAL_PWR_MNGR_WakeupSource </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Return the wakeup source from power save. </p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">The</td><td>return value can be a combination of the following values:<ul>
<li>WAKEUP_RTC</li>
<li>WAKEUP_LPU</li>
<li>WAKEUP_BLE_HOST_TIMER</li>
<li>WAKEUP_BLE</li>
<li>WAKEUP_PA15</li>
<li>WAKEUP_PA14</li>
<li>WAKEUP_PA13</li>
<li>WAKEUP_PA12</li>
<li>WAKEUP_PA11</li>
<li>WAKEUP_PA10</li>
<li>WAKEUP_PA9</li>
<li>WAKEUP_PA8</li>
<li>WAKEUP_PA7</li>
<li>WAKEUP_PA6</li>
<li>WAKEUP_PA5</li>
<li>WAKEUP_PA4</li>
<li>WAKEUP_PA3</li>
<li>WAKEUP_PA2</li>
<li>WAKEUP_PA1</li>
<li>WAKEUP_PA0</li>
<li>WAKEUP_PB15</li>
<li>WAKEUP_PB14</li>
<li>WAKEUP_PB13</li>
<li>WAKEUP_PB12</li>
<li>WAKEUP_PB11</li>
<li>WAKEUP_PB10</li>
<li>WAKEUP_PB9</li>
<li>WAKEUP_PB8</li>
<li>WAKEUP_PB7</li>
<li>WAKEUP_PB6</li>
<li>WAKEUP_PB5</li>
<li>WAKEUP_PB4</li>
<li>WAKEUP_PB3</li>
<li>WAKEUP_PB2</li>
<li>WAKEUP_PB1</li>
<li>WAKEUP_PB0</li>
<li>NO_WAKEUP_SOURCE (for any reason the device has not activated the DEEPSTOP level) </li>
</ul>
</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>Refer the wakeup source declaration to see if are supported from the device </dd></dl>

<p>Definition at line <a class="el" href="rf__driver__hal__power__manager_8c_source.html#l01178">1178</a> of file <a class="el" href="rf__driver__hal__power__manager_8c_source.html">rf_driver_hal_power_manager.c</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- HTML footer for doxygen 1.8.10-->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Copyright &copy; 2022 by STMicrolectronics. All rights reserved.<br>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.10
</small></address>
</body>
</html>
