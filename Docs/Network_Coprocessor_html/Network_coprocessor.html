<!-- HTML header for doxygen 1.8.10-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.10"/>
<title>BlueNRG-LP/BlueNRG-LPS network coprocessor: Framework description</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="STcustom.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="ST-logo-small.jpg"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">BlueNRG-LP/BlueNRG-LPS network coprocessor
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.10 -->
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">Framework description </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>This document describes the BlueNRG-LP/BlueNRG-LPS network co-processor framework and implementation on a external microcontroller .<br />
 The document content is valid for BlueNRG-LP/BlueNRG-LPS devices. Any difference, limitation is highlighted where needed.<br />
</p>
<h1><a class="anchor" id="U1"></a>
Introduction</h1>
<ul>
<li>BlueNRG-LP Bluetooth Low Energy (LE) System on Chips devices can be also configured as Bluetooth Low Energy (LE) network co-processor combining both Bluetooth LE host and controller solutions. </li>
<li>An application command interface (ACI) is provided for accessing the BlueNRG-LP/BlueNRG-LPS Bluetooth LE network co-processor host and controller: <ul>
<li>
User applications, i.e. programs running in another silicon chip, can send ACI commands to control the BlueNRG-LP/BlueNRG-LPS Bluetooth LE network co-processor. </li>
<li>
SPI or UART interface can be used to connect an external device, where the application runs, which sends ACI commands to control BlueNRG-LP/BlueNRG-LPSdevice and receives events from it. The ACI commands and events are transmitted through the selected bus interface (SPI or UART). </li>
</ul>
</li>
</ul>
<ul>
<li>As reference example for a external device connecting to the BlueNRG-LP/BlueNRG-LPS devices configured as Bluetooth LE network co-processors, a NUCLEO platform with STM32L4 microcontroller has been used.</li>
</ul>
<h1><a class="anchor" id="U2"></a>
SPI network coprocessor framework</h1>
<ul>
<li>The SPI communication protocol is described on <a href="../SPI_protocol_specification/SPI_protocol_specification.html">SPI protocol specification </a> html documentation. </li>
<li>The NUCLEO - BlueNRG-LP/BlueNRG-LPS hardware SPI interface and requested connections, BlueNRG-LP/BlueNRG-LPS SW Configuration description, network coprocessor framework structure and demonstration applications are described on the associated <a href="../STM32_SPI_protocol_example_html/STM32_SPI_protocol_example.html">NUCLEO - BlueNRG-LP/BlueNRG-LPS SPI network coprocessor </a> html documentation. </li>
<li>This documents also describes the typical Network coprocessor application structure, taking as reference the Bluetooth LE Beacon network coprocessor application, in terms of: <ul>
<li>
Project structure </li>
<li>
<p class="startli">Main function structure: </p><ul>
<li>
SystemInit_NWK(): it initializes the STM32L4 device (GPIO, clock, UART and SPI interface) for BlueNRG-LP/BlueNRG-LPS network coprocessor. </li>
<li>
BlueNRG_Stack_Initialization(): it initializes the ACI framework lists and it resets the BlueNRG-LP/BlueNRG-LPS device </li>
<li>
DeviceInit(): it calls the BlueNRG-LP APIs for configuring the Bluetooth LE stack (set public address, init GATT and GAP layers, set TX power level, set security settings, add the specific services and characteristics). </li>
<li>
BTLE_StackTick(): Bluetooth LE stack tick APIs which allows to process the Bluetooth LE stack events coming from BlueNRG-LP/BlueNRG-LPS Bluetooth LE stack. </li>
<li>
APP_Tick(): application tick function which implements the application specific state machine. </li>
<li>
Bluetooth LE stack events callbacks example </li>
</ul>
<p class="endli"></p>
</li>
<li>
<p class="startli"><b> NOTE </b>: User can take as reference the provided demonstrations applications (SPI framework), in order to implement its own demo application interacting with the BlueNRG-LP/BlueNRG-LPS device configured as Bluetooth LE network coprocessor (SPI mode).</p>
<p class="endli"></p>
</li>
</ul>
</li>
</ul>
<h1><a class="anchor" id="U3"></a>
UART network co-processor framework</h1>
<ul>
<li>The UART supported configurations, NUCLEO - BlueNRG-LP/BlueNRG-LPS hardware UART interface and requested connections, BlueNRG-LP/BlueNRG-LPS SW Configuration description, network co-processor framework structure and demonstration applications are described on the associated <a href="../STM32_UART_protocol_example_html/STM32_UART_protocol_example.html">NUCLEO - {STEVAL-IDB01{1|2}Vx} UART network coprocessor </a> HTML documentation. </li>
<li>This documents also describes the typical Network coprocessor application structure, taking as reference the Bluetooth LE Beacon network coprocessor demonstration application, in terms of:<ul>
<li>
Project structure </li>
<li>
<p class="startli">Main function structure: </p><ul>
<li>
SystemInit_NWK(): it initializes the STM32L4 device (GPIO, clock, UART and SPI interface) for BlueNRG-LP/BlueNRG-LPS network coprocessor. </li>
<li>
BlueNRG_Stack_Initialization(): it initializes the ACI framework lists and it resets the BlueNRG-LP/BlueNRG-LPS device </li>
<li>
DeviceInit(): it calls the BlueNRG-LP/BlueNRG-LPS APIs for configuring the Bluetooth LE stack (set public address, init GATT and GAP layers, set TX power level, set security settings, add the specific services and characteristics). </li>
<li>
BTLE_StackTick(): Bluetooth LE stack tick APIs which allows to process the Bluetooth LE stack events coming from BlueNRG-LP/BlueNRG-LPS Bluetooth LE stack. </li>
<li>
APP_Tick(): application tick function which implements the application specific state machine. </li>
<li>
Bluetooth LE stack events callbacks example </li>
</ul>
<p class="endli"></p>
</li>
<li>
<p class="startli"><b> NOTE </b>: User can take as reference the provided demonstrations applications (UART framework), in order to implements its own demo application interacting with the BlueNRG-LP/BlueNRG-LPS device configured as Bluetooth LE network co-processor (UART mode).</p>
<p class="endli"></p>
</li>
</ul>
</li>
</ul>
<h1><a class="anchor" id="U4"></a>
Network co-processor ACIs, Events and Constants definition</h1>
<ul>
<li>The <a href="../STM32_APIs_Events_html/files.html">External Micro - BlueNRG-LP/BlueNRG-LPS Bluetooth LE stack APIs, Events and Constants</a> provides the list of ACI interface files (APIs, events, constants, errors) and related description: <ul>
<li>
ble_status.h: Header file which contains definition of Bluetooth status and error codes </li>
<li>
bluenrglp_events.h: Header file for external uC - BlueNRG-LP/BlueNRG-LPS in network co-processor mode (Event callbacks) </li>
<li>
bluenrglp_gap.h: Header file for BlueNRG-LP's GAP layer constants </li>
<li>
bluenrglp_gap_aci.h: Header file for external uC - BlueNRG-LP/BlueNRG-LPS in network co-processor mode (gap_aci) </li>
<li>
bluenrglp_gatt_aci.h: Header file for external uC - BlueNRG-LP/BlueNRG-LPS in network co-processor mode (gatt_aci) </li>
<li>
bluenrglp_gatt_server.h: Header file for BlueNRG-LP's GATT server layer constants </li>
<li>
bluenrglp_hal.h Header: file with HAL define for BlueNRG-LP/BlueNRG-LPS </li>
<li>
bluenrglp_hal_aci.h: Header file for external uC - BlueNRG-LP/BlueNRG-LPS in network co-processor mode (hal_aci) </li>
<li>
bluenrglp_hci_le.h: Header file for external uC - BlueNRG-LP/BlueNRG-LPS in network co-processor mode (hci_le) </li>
<li>
bluenrglp_l2cap_aci.h: Header file for external uC - BlueNRG-LP/BlueNRG-LPS in network co-processor mode (l2cap_aci) </li>
<li>
hci.h: Header file for BlueNRG-LP's HCI APIs </li>
<li>
link_layer.h: Header file for BlueNRG-LP/BlueNRG-LPS's link layer constants </li>
<li>
sm.h: Header file for BlueNRG-LP's security manager constants </li>
</ul>
</li>
</ul>
<ul>
<li>These files are provided inside {Project folder}\Middlewares folder. </li>
</ul>
</div></div><!-- contents -->
<!-- HTML footer for doxygen 1.8.10-->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Copyright &copy; 2022 by STMicrolectronics. All rights reserved.<br>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.10
</small></address>
</body>
</html>
