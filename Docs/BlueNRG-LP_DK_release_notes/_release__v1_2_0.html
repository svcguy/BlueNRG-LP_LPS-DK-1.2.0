<!-- HTML header for doxygen 1.8.10-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.10"/>
<title>BlueNRG-LP/BlueNRG-LPS Development kits (STSW-BNRGLP-DK): Release Notes 1_2_0/ 04-April-2022 (BlueNRG-BLE Stack Library v3.1a)</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="STcustom.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="ST-logo-small.jpg"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">BlueNRG-LP/BlueNRG-LPS Development kits (STSW-BNRGLP-DK)
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.10 -->
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">Release Notes 1_2_0/ 04-April-2022 (BlueNRG-BLE Stack Library v3.1a) </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1><a class="anchor" id="S1"></a>
New Features/Changes</h1>
<ul>
<li>
This section lists the new features/changes compared to previous STSW-BNRGLP-DK DK release: <br />
<ul>
<li>
STSW-BNRGLP-DK v1.2.0 release supporting BlueNRG-BLE Stack Library v3.1a (Bluetooth Low Energy stack):<ul>
<li>
Added support for BlueNRG-LPS device and related device drivers. </li>
<li>
BlueNRG-LPS device supports the Bluetooth Low Energy Directions Finding features (AoA: angle of Arrival; AoD: Angle of Departure). </li>
</ul>
</li>
<li>
Updated BlueNRG-BLE Stack Library v3.1a with new modular configuration option (CONNECTION_ENABLED) for enabling/disabling the connection capability. </li>
<li>
Updated BLE Beacon application for disabling the connection capability support using the new modular configuration option CONNECTION_ENABLED = 0 on configuration header file (BLE_STACK_CUSTOM_CONF configuration) <ul>
<li>
It allows to improve the application FLASH memory footprint of ~49Kb compared to the configuration with CONNECTION_ENABLED = 1. </li>
</ul>
</li>
<li>
Updated WiSE-Studio projects for new WiSE-Studio v1.1.0 supporting BlueNRG-LP and BlueNRG-LPS devices. </li>
<li>
Updated BLE Beacon application with AoA Tag configuration for showing a simple Direction Finding, AoA tag scenario (using a simple beacon advertising). </li>
<li>
Renamed all SDK demonstration applications interrupt handlers from bluenrg_lp_it.[ch] to rf_device_it.[ch]. </li>
<li>
Update all RF demonstrations applications interrupt handlers with new BLE_RXTX_SEQ_IRQHandler() required for properly handling high power mode. </li>
<li>
Updated hal_miscutils.[ch] with new HAL_RXTX_SEQ_IRQHandler() function needed for controlling high power mode. </li>
<li>
Added BlueNRG-LPS Bluetooth LE Direction Finding demonstration application (tag and locator roles, connection mode). </li>
<li>
Added new PKA driver v7c for BlueNRG_LPS and related BlueNRG-LPS PKA demonstration applications. </li>
<li>
Added IAR, Keil and WiSE-Studio toolchain (gcc based) demonstration applications projects for BlueNRG-LPS. </li>
<li>
Added support for WiSE-Studio Linux and MAC OS versions (user must copy the installed Windows folder on his Linux or MAC OS platform). </li>
<li>
Added new IAR and KEIL toolchains utilities/pack for supporting BlueNRG-LPS device: <b>user is requested to install them before opening SDK projects. </b> </li>
<li>
Updated SW framework and KEIL projects in order to support Arm Compiler version 6 (version 5 is obsolete). </li>
<li>
Updated DTM demonstration application v1.2.0. </li>
<li>
Modified DTM_Updater project (v1.10), in order to generate single DTM_Updater_UART.hex and DTM_Updater_SPI.hex files suitable for both BlueNRG-345 and BlueNRG-355 devices:<ul>
<li>
Images built with BlueNRG-345 as project target are generated. These images can be used for both BlueNRG-345 and BlueNRG-355 devices without the need to migrate DTM_Updater project to specific BlueNRG-3x5 device (x = 4,5). </li>
<li>
NOTE: New DTM_Updater v1.10 requires STSW-BNRGUI, BlueNRG GUI v4.3.0 for proper stack updater procedure through GUI</li>
</ul>
</li>
<li>
Updated USB_CMSISDAP FW version to 1.10 (Firmware-CMSISDAP: USB_CMSISDAP_LP.hex for BlueNRG-LP kits and USB_CMSISDAP_LPS.hex for BlueNRG-LPS kits). </li>
<li>
Added Long Write project configurations to BLE_SerialPort demonstration application. Update BLE_RemoteControl demo for proper encryption option support </li>
<li>
Updated DTM framework: use proprietary memory allocator for advertising buffers. Heap is no more needed. </li>
<li>
Updated DTM framework: add support to ACL Data even without LL_ONLY macro defined.It is possible to use "Link Layer only" mode by enabling it at runtime. </li>
<li>
Renamed some Peripheral Drivers demonstration application names for reducing the overall path length. </li>
<li>
Updated peripheral drivers lpuart and power save manager for properly handling lpuart in DEEPSTOP mode (BlueNRG-LPS). </li>
<li>
Updated Micro Power Manager demonstration application for using new power save mode with LPUART enabled in DEEPSTOP (BlueNRG-LPS). </li>
<li>
Updated system_BlueNRG_LP.c for improving crystal switch performances and properly handling LSE turning off at reset time </li>
<li>
Added new startup_BlueNRG_LP.c on CMSIS files </li>
<li>
Updated BLE Remote Control with Long Range demonstration application </li>
<li>
Added new Peripheral Drivers Examples (I2C IT pressure, USART SPI master and slave, USART RX circular DMA, USART TR, RX inverted, ADC watchdog). </li>
<li>
Added support for BlueNRG-LP, STEVAL-IDB011V2 Kit (it is supported through the <b> same STEVAL-IDB011V1 BSP and related demonstration applications projects </b>). </li>
<li>
<p class="startli">Added support for BlueNRG-LPS, STEVAL-IDB012V1 Kit (it is supported through the STEVAL-IDB012V1 BSP and related demonstration applications projects).</p>
<p class="endli"></p>
</li>
<li>
NOTES: <ul>
<li>
<b>Start menu folder for STSW-BNRGLP-DK v1.2.0 SW package is ST BlueNRG-LP_LPS DK 1.2.0</b> </li>
<li>
All SW package folders (Application, Docs, Drivers, Firmware, Middlewares, Project, Utility) are located, by default, under C:\Users\{username}\ST\BlueNRG-LP DK 1.2.0: <ul>
<li>
"Release folder" on STSW-BNRGLP-DK 1.2.0 "Start Menu" allows to get direct access to such folders. </li>
</ul>
</li>
<li>
<b> Before using a BlueNRG-LP platform, please align the <a href="../USB_CMSISDAP_FW_upgrade_procedure/USB_CMSISDAP_FW_upgrade_procedure.html">USB_CMSISDAP </a> to the latest available version 1.10</b>. </li>
<li>
After upgrading the USB_CMSISDAP FW, please unplug and replug again the BlueNRG-LP, STEVAL platform on a PC USB port, and wait for complete proper board recognition with associated PC drivers. </li>
</ul>
</li>
</ul>
</li>
</ul>
<h2><a class="anchor" id="S11"></a>
Navigator PC applications</h2>
<ul>
<li>
BlueNRG-LP Navigator and BlueNRG-LPS Navigator supporting, respectively, BlueNRG-LP and BlueNRG-LPS devices. <ul>
<li>
BlueNRG-LP/LPS Navigators can be launched through the related tab on BlueNRG-LP SDK v1.2.0 Start Menu or through, respectively, the BlueNRG-LP_Navigator_RUN.bat, BlueNRG-LPS_Navigator_RUN.bat available on Application folder. </li>
</ul>
</li>
</ul>
<h2><a class="anchor" id="S12"></a>
Radio Init Wizard PC application</h2>
<ul>
<li>
<a href="../BLE_Radio_Parameters_Wizard/BLE_Radio_Parameters_Wizard.html">BlueNRG-X Radio Init Wizard </a>supporting BlueNRG-LP, BlueNRG-LPS devices and Bluetooth LE stacks v3.x: <ul>
<li>
It allows to properly configure the BLE_STACK_Init() API parameters in an user friendly way and to generate the related application *_config.h file to be used on user C application. </li>
<li>
Please refer to the following documents for more information about the Bluetooth LE radio initialization parameters to be configured: <ul>
<li>
<a href="../BLE_Stack_Memory_Manager/BLE_Stack_Memory_Manager.html">Bluetooth LE stack v3.x Stack Memory Manager HTML documentation </a> </li>
<li>
<a href="../BlueNRG-LP_GATT_database_size/BlueNRG-LP_GATT_database_size.html">GATT database size guidelines HTML documentation</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<h2><a class="anchor" id="S121"></a>
Secure Bootloader PC application</h2>
<ul>
<li>
<a href="../Secure_Bootloader/Secure_Bootloader.html">Secure Bootloader GUI</a> PC application supporting BlueNRG-LP, BlueNRG_LPS devices Secure bootloader framework: <ul>
<li>
It allows to generate the authentication keys, sign a binary image and activate the secure bootloader through OTP. </li>
</ul>
</li>
</ul>
<h2><a class="anchor" id="S13"></a>
PC application/utilities (available on standalone SW packages)</h2>
<ul>
<li>
BlueNRG GUI SW package: it contains the BlueNRG GUI PC application and script launcher utility supporting also BlueNRG-LP, BlueNRG-LPS devices. </li>
<li>
RF-Flasher SW package: it contains PC utilities for device BlueNRG-X Flash read, erase, verify and programming operations. </li>
<li>
BlueNRG current consumption estimation tool SW package: it provides a way to predict the current consumption of the BlueNRG-X devices. </li>
</ul>
<h1><a class="anchor" id="S2"></a>
Solved Issues</h1>
<ul>
<li>
This section lists the solved issues compared to previous BlueNRG-LP DK release: <br />
 <ul>
<li>
ID 4379: HID example not functional over IOS under specific condition </li>
<li>
ID 4253: Fixed wrong BLUEFLAG address and DTM_APP address in DTM_Updater_Config.h </li>
<li>
ID 4250: Fixed the FAILED OP response to ERASE BLUEFLAG frame in DTM_Updater mode </li>
<li>
ID 3665: Warning on HAL SPI demo in the BlueNRG-LP SDK v1.1.0: on second configuration based on SPI1 the SLAVE MOSI pin is PB14. </li>
<li>
ID 3673: BlueNRG-LPS, BLE stack v3.1: BLE_Throughput demo is not supported due to the RAM memory constraints. </li>
<li>
ID 3747: BlueNRG-LPS Navigator doesn't include 3D view of STEVAL-IDB012V1 </li>
<li>
ID 3447: Free RTOS framework is not supported on WiSE-Studio context </li>
<li>
ID 3624: High power consumption in RX state when high power mode is used (i.e. SMPS voltage level 1.9V) </li>
<li>
ID 3556: RSSI measurements are not correct when High Power mode is used (i.e. SMPS voltage level 1.9V) </li>
<li>
ID 3079: Limitation with allocation of advertising buffers with GCC (WiSE) toolchain </li>
<li>
ID 4479: Migration from BlueNRG-355 to BlueNRG-345 over WiSE-Studio instrunctions to be reviewed </li>
<li>
ID 4484: Fixed the symbols of the ADC watchdog channel ADC_LL_WDG_CHANNEL </li>
<li>
ID 4739: ModulesInit() function shall be reviewed in all the Bluetooth LE projects: BLE_STACK_Init() must be called as last API. </li>
<li>
ID 4765: Virtual timer not triggered (randomly observed on different kits and toolchains). </li>
<li>
ID 4784: HAL_SetHighPower() must be reviewed for all the SMPS configuration </li>
<li>
ID 4785: SMPS OFF configuration init to be reviewed in SystemInit </li>
<li>
ID 4787: DTM SPI firmware reset by watchdog: Add new function to the HAL PWR manager to specify the behavior of the IWDG in deepstop mode. </li>
<li>
ID 4790: OTA_Erase_Flash() on OTA Service manager to be updated: last available sector is not erased </li>
<li>
ID 4712: FreeRTOS does not manage correctly the system time </li>
<li>
ID 3718: CMSISDAP: If the IRQ is not immediately put low by BlueNRG after the header is received during a SPI TX transaction (from STM32 to BlueNRG), the communication hangs. In this fix the CS is released only after IRQ is detected low. </li>
<li>
ID 3969: Double definition of weak PKAMGR_PowerSaveLevelCheck() </li>
<li>
ID 4295: External MCU framework: no check for NULL pointer when calling Osal_MemCpy in ACI library </li>
<li>
ID 4408: HAL_GetPartInfo always returned the same DIE ID. Now it returns the ID based on actual hardware information. </li>
<li>
ID 4563: SensorDemo_NWK example: characteristic values not updated due to missing call to aci_gatt_srv_write_handle_value_nwk() before the aci_gatt_srv_authorize_resp_nwk(). </li>
<li>
ID 4709: External MCU framework: limitation for maximum size of events. Increased the maximum size of events that can be received to 536 bytes. </li>
<li>
ID 4712: FreeRTOS may stop running after system time goes beyond 32 bits </li>
<li>
ID 4739: The ModulesInit() function initializes the modules in a wrong order. </li>
<li>
ID 4729: An incorrect calibration measurement on LSI may be executed when POWER_SAVE_LEVEL_STOP_NOTIMER is used </li>
<li>
ID 4837: CMSISDAP: increase size of buffers for commands. Aci_gatt_clt_write_long_nwk was not working with more than 490 bytes. </li>
<li>
ID 4847: Wrong cumulative time calculated in virtual timer. </li>
<li>
ID 4900: Wrong variable size in HAL_RADIO_CarrierSense(). </li>
<li>
<p class="startli">ID 4901: HAL_RADIO_CarrierSense() may return error when compiler optimization level is low: increased start time of RX.</p>
<p class="endli"></p>
</li>
</ul>
</li>
</ul>
<h1><a class="anchor" id="S3"></a>
SW Package Contents</h1>
<ul>
<li>
BlueNRG-LP/LPS Bluetooth Low Energy (LE) stack binary library, header files for APIs, application framework, master library + HTML documentation </li>
<li>
BlueNRG-LP/LPS Bluetooth Low Energy (LE) network co-processor for BlueNRG GUI (UART, SPI mode) reference applications (DTM, Beacon, Serial Port Master and Slave, Sensor demo)  </li>
<li>
BlueNRG-LP/LPS Bluetooth Low Energy demonstration applications (header, sources, toolchains projects, prebuilt images) + HTML documentation </li>
<li>
BlueNRG-LP/LPS Bluetooth Low Energy (LE) network co-processor fraemwork and demonstration applications + documentation  </li>
<li>
BlueNRG-LP/LPS CMSIS files </li>
<li>
BlueNRG-LP/LPS FreeRTOS files </li>
<li>
BlueNRG-LP/LPS peripherals LL, HAL drivers, demo applications, prebuilt binary images + HTML documentation </li>
<li>
BlueNRG-LP/LPS SDK and Middlewares, HAL drivers + HTML documentation </li>
<li>
BlueNRG-LP/LPS GATT database size guidelines HTML documentation  </li>
<li>
BlueNRG-LP/LPS Applications debugging + GATT database size guidelines + SDK key resources HTML documentation  </li>
<li>
BlueNRG-LP/LPS Navigator PC applications  </li>
<li>
BlueNRG-X Radio Init Wizard PC application  </li>
<li>
Secure bootloader PC application and utilities (refer to BlueNRG-LP UART Bootloader Protocol Application Note (AN5471)) </li>
<li>
USB-CMISDAP.hex binary image v1.7 </li>
<li>
BlueNRG-LP/LPS IAR and KEIL toolchains utilities </li>
</ul>
<h2><a class="anchor" id="S31"></a>
Bluetooth Low Energy (LE) demonstration applications</h2>
<ul>
<li>
The following Bluetooth LE examples applications are available with related workspaces and Bluetooth LE stack v3.x modular configurations options : <ol>
<li>
<b>BLE ANCS </b> application supporting the notification consumer profile role: <ul>
<li>
Projects supporting BlueNRG-LP/LPS Development Kits (workspace: Release [BLE_STACK_BASIC_CONF]).</li>
</ul>
</li>
<li>
<b>BLE Beacon </b> application: <ul>
<li>
Projects supporting BlueNRG-LP/LPS Development Kits (workspaces: Release [BLE_STACK_CUSTOM_CONF], Use_OTA_ServiceManager [BLE_STACK_BASIC_CONF], ExtendedAdv [BLE_STACK_CUSTOM_CONF], PeriodicAdv [BLE_STACK_CUSTOM_CONF], AoA-Tag [BLE_STACK_CUSTOM_CONF]).</li>
</ul>
</li>
<li>
<b>BLE Beacon with Flash Management</b> application: <ul>
<li>
Projects supporting BlueNRG-LP/LPS Development Kits (workspaces: Release [BLE_STACK_CUSTOM_CONF]).</li>
</ul>
</li>
<li>
<b>BLE Beacon with FreeRTOS</b> application: <ul>
<li>
Projects supporting BlueNRG-LP/LPS Development Kits (workspaces: Release [BLE_STACK_CUSTOM_CONF])</li>
</ul>
</li>
<li>
<b>BLE Serial Port </b> application: <ul>
<li>
Projects supporting BlueNRG-LP/LPS Development Kits (workspaces: Client &amp; Client_LongWrites [BLE_STACK_CUSTOM_CONF], Server &amp; Server_LongWrites [BLE_STACK_BASIC_CONF], Server Lower &amp; Higher with OTA [BLE_STACK_SLAVE_DLE_LE_2M_CONF], Server with OTA Service Manager [BLE_STACK_BASIC_CONF]).</li>
</ul>
</li>
<li>
<b>BLE Serial Port Master &amp; Slave</b> application: <ul>
<li>
Projects supporting BlueNRG-LP/LPS Development Kits (workspace: Release [BLE_STACK_CUSTOM_CONF]). </li>
</ul>
</li>
<li>
<b>BLE Privacy </b>application addressing Bluetooth LE Controller Privacy feature: <ul>
<li>
Projects supporting BlueNRG-2 Development Kits (workspaces: Master [BLE_STACK_CUSTOM_CONF], Slave [BLE_STACK_CUSTOM_CONF]).</li>
</ul>
</li>
<li>
<b>BLE HID/HOGP Keyboard, Mouse</b> applications: <ul>
<li>
Projects supporting BlueNRG-LP/LPS Development Kits (workspaces: HID_Keyboard [BLE_STACK_BASIC_CONF], HID_Mouse [BLE_STACK_BASIC_CONF]). </li>
</ul>
</li>
<li>
<b>BLE Multiple Connections</b> applications: <ul>
<li>
Projects supporting BlueNRG-LP/LPS Development Kits (workspaces: Slave [BLE_STACK_SLAVE_DLE_CONF], MasterSlave [BLE_STACK_CUSTOM_CONF], Master [BLE_STACK_FULL_CONF]).</li>
</ul>
</li>
<li>
<b>BLE Remote Control with Long Range (Coded PHY) </b> applications: <ul>
<li>
Projects supporting BlueNRG-LP/LPS Development Kits (workspaces: Client[BLE_STACK_CUSTOM_CONF], Server [BLE_STACK_CUSTOM_CONF]).</li>
</ul>
</li>
<li>
<b>BLE Remote Control </b>example: <ul>
<li>
Projects supporting BlueNRG-LP/LPS Development Kits (workspaces: Release [BLE_STACK_CUSTOM_CONF]).</li>
</ul>
</li>
<li>
<b>BLE Sensor Demo </b>application with acceleration and environmental sensors values (temperature &amp; pressure): <ul>
<li>
Projects supporting BlueNRG-LP/LPS Development Kits (workspaces: Release [BLE_STACK_BASIC_CONF], Lower &amp; Higher with OTA [BLE_STACK_SLAVE_DLE_LE_2M_CONF], Use OTA Service Manager [BLE_STACK_BASIC_CONF]).</li>
</ul>
</li>
<li>
<b>BLE Sensor Demo, BlueMS </b>application supporting ST BLE Sensor (BlueMS) smarthphone app: <ul>
<li>
Projects supporting BlueNRG-LP/LPS Development Kits (workspaces: Release [BLE_STACK_BASIC_CONF], Lower &amp; Higher with OTA [BLE_STACK_SLAVE_DLE_LE_2M_CONF], Use OTA Service Manager [BLE_STACK_BASIC_CONF]).).</li>
</ul>
</li>
<li>
<b>BLE Sensor Demo Central </b> which emulates the Sensor Demo applications available for smartphones (IOS and Android): <ul>
<li>
Projects supporting BlueNRG-LP/LPS Development Kits (workspace: Release [BLE_STACK_CUSTOM_CONF]</li>
</ul>
</li>
<li>
<b>BLE Security </b> application which shows some basic security examples : <ul>
<li>
Projects supporting BlueNRG-LP/LPS Development Kits </li>
<li>
Workspaces &amp; supported combinations: <ul>
<li>
Master_PassKey_Random &amp; Slave_PassKey_Random [BLE_STACK_CUSTOM_CONF] </li>
<li>
Master_PassKey_Fixed &amp; Slave_PassKey_Fixed [BLE_STACK_CUSTOM_CONF] </li>
<li>
Master_JustWorks &amp; Slave_JustWorks [BLE_STACK_CUSTOM_CONF] </li>
<li>
Master_NumericComp &amp; Slave_NumericComp (new pairing method supported only with LE Secure connections) [BLE_STACK_CUSTOM_CONF] </li>
</ul>
</li>
</ul>
</li>
<li>
<b>BLE Throughput with data length extension and 1Mbps/2Mbps PHY, L2CAP-COS</b> application: <ul>
<li>
Projects supporting BlueNRG-LP Development Kits (workspaces: Client [BLE_STACK_CUSTOM_CONF], Server [BLE_STACK_CUSTOM_CONF]).</li>
</ul>
</li>
<li>
<b>BLE Power Consumption</b> application: <ul>
<li>
Projects supporting BlueNRG-LP/LPS Development Kits (workspaces: Release [BLE_STACK_BASIC_CONF].</li>
</ul>
</li>
<li>
<b>BLE Clock Sync</b> application: <ul>
<li>
Projects supporting BlueNRG-LP/LPS Development Kits (workspaces: Master [BLE_STACK_CUSTOM_CONF], Slave [BLE_STACK_BASIC_CONF]).</li>
</ul>
</li>
<li>
<b>BLE LE Power Control</b> application: <ul>
<li>
Projects supporting BlueNRG-LP/LPS Development Kits (workspaces: Central [BLE_STACK_CUSTOM_CONF], Peripheral [BLE_STACK_CUSTOM_CONF])</li>
</ul>
</li>
<li>
<b>BLE Direction Finding</b> application: <ul>
<li>
Projects supporting BlueNRG-LPS Development Kits (workspaces: Tag [BLE_STACK_CUSTOM_CONF], Locator [BLE_STACK_CUSTOM_CONF])</li>
</ul>
</li>
</ol>
</li>
</ul>
<h2><a class="anchor" id="S32"></a>
Bluetooth Low Energy (LE) network co-processor</h2>
<ul>
<li>
<p class="startli"><b>DTM v1.2.0</b> application for network co-processor mode with BlueNRG GUI (UART, SPI): </p><ul>
<li>
It supports network co-processor configurations: UART (baudrate: 921600), SPI. </li>
<li>
Projects supporting BlueNRG-LP Development Kits (workspaces: UART, UART_WITH_UPDATER, UART_FOR_UPDATER, SPI, SPI_WITH_UPDATER, SPI_FOR_UPDATER). </li>
<li>
Projects supporting BlueNRG-LPS Development Kits (workspaces: UART, UART_WITH_UPDATER, UART_FOR_UPDATER, SPI, SPI_WITH_UPDATER, SPI_FOR_UPDATER). </li>
<li>
<p class="startli">NOTE: STEVAL-IDB012V1 alpha kit jumper JP3 must be removed when using DTM SPI projects: </p><ul>
<li>
User must rebuild the DTM SPI project configurations with preprocessor option STEVAL_IDB012V1_ALPHA </li>
</ul>
<p class="endli"></p>
</li>
</ul>
<p class="endli"></p>
</li>
<li>
<b>NOTES </b>: <ul>
<li>
<b> Before using a STEVAL-IDB011V{1|2}/STEVAL-IDB012V1 platform as network co-processor for evaluation purposes, upgrade the DTM application to the latest available version.</b>. <ul>
<li>
Prebuilt DTM binary images are available on Firmware/BLE_Examples/DTM folder and can be downloaded using the BlueNRG-LP/LPS Navigator tools or by Drag-and_drop copy: <ul>
<li>
DTM_UART.hex: DTM image with no updater capability; </li>
<li>
DTM_UART_WITH_UPDATER.hex: DTM image with updater capability; </li>
<li>
DTM_SPI.hex: DTM image with no updater capability; </li>
<li>
DTM_SPI_WITH_UPDATER.hex: DTM image with updater capability.</li>
</ul>
</li>
<li>
Further, binary images for DTM Firmare updater procedure (i.e.: using BlueNRG GUI) are available: <ul>
<li>
DTM_UART_FOR_UPDATER.bin; </li>
<li>
DTM_SPI_FOR_UPDATER.bin .</li>
</ul>
</li>
<li>
DTM basic prebuilt binary images built with BLE_STACK_BASIC_CONF option are also available on Firmware/BLE_Examples/DTM_basic folder. </li>
</ul>
</li>
<li>
BlueNRG-LPS, DTM project configurations have been tuned for matching device memory constraints (FLASH/RAM) and allow basic devices features evaluation: <ul>
<li>
Refer to <a href="../BlueNRG-LP_key_resources/key_resources.html">BlueNRG-LP, BlueNRG-LPS Key Resources, 4) Design &amp; Bringing Up custom BlueNRG-LP, BlueNRG-LPS PCB</a> section for details about BlueNRG-LPS DTM settings (Bluetooth LE modular configurations and DTM_Config.h parameters). </li>
</ul>
</li>
</ul>
</li>
</ul>
<h2><a class="anchor" id="S33"></a>
Peripheral drivers examples</h2>
<ul>
<li>
<p class="startli">The following Peripherals Drivers examples are available: </p><ol>
<li>
<b>ADC </b>examples (Battery, Temperature, Conversion, Analog Microphone, Watchdog, DMA). </li>
<li>
<b>BSP </b>examples (COM, Leds, buttons, sensors) </li>
<li>
<b>CRC </b>examples (Basic example, User Defined Polynomial and Polynomial Update) </li>
<li>
<b>DMA </b>examples (memory to memory example) </li>
<li>
<b>EXTI </b>examples (Toggle led) </li>
<li>
<b>Flash </b>examples (Erase, Write) </li>
<li>
<b>GPIO </b>examples (Infinitive led toggling, IO toggle, EXTI) </li>
<li>
<b>HAL </b>examples: (Time base, RTC Alarm, RTC Timebase wakeup) </li>
<li>
<b>I2C </b>examples (Master/Slave, IT, DMA, Polling, IT pressure) </li>
<li>
<b>I2S </b> examples (Audio, RX, TX) </li>
<li>
<b>IWDG </b>examples (Window mode, Reset, Refresh Until User Event Init) </li>
<li>
<b>LPUART</b> examples (TX/RX) </li>
<li>
<b>MICRO </b>examples (Hello World , Power Save modes) </li>
<li>
<b>PKA </b>examples (BlueNRG-LP: ECC sign; BlueNRG-LPS: Ecc Scalar, ECDSA Sign, Modular Exp, Point Check) </li>
<li>
<b>PVD </b> example </li>
<li>
<b>2.4 GHZ proprietary radio </b>examples (Automatic Channel Management, Beep, Beep Multistate,Serial Port and encryption, RC, Sleep, Sniffer, Sniffer Multistate, TX/RX, Star network, OTA, throughput) </li>
<li>
<b>PDM </b> example (digital microphone) </li>
<li>
<b>RCC </b>examples (HSE startup time measurements) </li>
<li>
<b>RNG </b>examples (RNG Generate Random Numbers, Multi RNG) </li>
<li>
<b>RTC </b>examples (RTC wakeup, alarm, autocalibration, calendar, exit standby with wakeup timer, wakeup calendar) </li>
<li>
<b>SPI </b>examples (SPI Half/Full Duplex, IT, DMA, Polling, Master/Slave) </li>
<li>
<b>TIM </b>examples (TIM Break and Dead time, Input capture, Output compare, One Compare, time base, OC active,inactive and toggle,one pulse, one pulseTI2 trigger, Frequency divider, PWM Input/Output/Train) </li>
<li>
<b>USART </b>examples (RX/TX, IT, DMA, Polling, printf, Hw Flow Control,Tx and Rx Inverted, RX with circular DMA, USART SPI Master &amp; Slave) </li>
</ol>
<p class="endli"></p>
</li>
</ul>
<h1><a class="anchor" id="S4"></a>
Development Toolchains</h1>
<ul>
<li>
IAR Embedded Workbench for ARM (EWARM) toolchain V8.40.1 or later. </li>
<li>
NOTES: <ul>
<li>
User is requested to copy the new files <b>EWARM_BlueNRG-LP_Flasher_2.1.1.zip</b> available on BlueNRG-LP/BlueNRG-LPS DK, Utility folder: it allows to add BlueNRG-LP/BlueNRG-LPS device support to EWARM, IAR toolchain (just copy and extract under user EWARM, IAR toolchain main folder). </li>
</ul>
</li>
</ul>
<ul>
<li>
Keil uVision V5 (MDK-ARM) toolchain V5.33 or later. </li>
<li>
NOTES: <ul>
<li>
For BlueNRG-LP/BlueNRG-LPS device support, user is requested to install the new BlueNRG-LP/BlueNRG-LPS Keil, MDK-ARM support files (Keil Pack) available on BlueNRG-LP/BlueNRG-LPS DK, Utility folder: <b>Keil.STBlueNRG-LP_DFP.3.0.0.pack</b>. </li>
<li>
When opening a Keil project, please make sure the ST BlueNRG-LP/BlueNRG-LPS has been already selected as device on Keil Debug tab as follow: <ul>
<li>
On Keil Project, Option for Target '...', Debug, Use tab, select CMSIS-DAP Debugger option; </li>
<li>
Open the associated Settings tab, select Flash Download and then Add button: select ST BlueNRG-LP/BlueNRG-LPS Device Family Package according to the current selected device and press Add. </li>
<li>
The selected configuration can then be saved from File, Save All option (on file *.uvoptx). </li>
</ul>
</li>
</ul>
</li>
</ul>
<ul>
<li>
WiSE-Studio IDE gcc toolchain v1.1.0. </li>
<li>
NOTES: <ul>
<li>
It supports both BlueNRG-LP and BlueNRG-LPS devices. </li>
<li>
It is available on ST web site: refer to STSW-WISE-STUDIO part number. </li>
<li>
Three SW packages supporting, respectively, Windows 10, Linux and MAC OS are available. </li>
<li>
BlueNRG-LP, BlueNRG-LPS SDK v1.2.0 WiSE-Studio projects must be opened with new WiSE-Studio v1.1.0 tool. </li>
<li>
<b>WiSE-Studio v.1.0.0 projects delivered on previous BlueNRG-LP SDK versions (&lt; v1.2.0) can be ported to WiSE-Studio v.1.1.0 </b>by following these steps: <ul>
<li>
Open with a text editor the WiSE-Studio v1.0.0 ".cproject" file to be migrated. </li>
<li>
Replace any instance of "BlueNRG-332AE" with "BlueNRG-332AT" and save the .cproject file. </li>
</ul>
</li>
</ul>
</li>
</ul>
<h1><a class="anchor" id="S5"></a>
Supported platforms</h1>
<ul>
<li>
BlueNRG-LP QFN48 development kit (order code: STEVAL-IDB011V1 (NRND), STEVAL-IDB011V2).  </li>
<li>
BlueNRG-LPS QFN32 development kit (order code: STEVAL-IDB012V1).  </li>
<li>
<p class="startli">NUCLEO-L476RG platform + BlueNRG-LP/LPS kit configured as DTM network coprocessor.</p>
<p class="endli"></p>
</li>
<li>
NOTES: <ol>
<li>
When using a NUCLEO platform, install the related ST-Link, ST-Link/V2, ST-Link/V2-1 USB driver (STSW-LINK009). </li>
<li>
When using a NUCLEO platform, make sure the ST-Link firmware is updated to latest version available on ST web page. This can be checked/achieved by using the STM32 ST-LINK Utility v3.6.0 (or later): <ol>
<li>
Connect a NUCLEO platform to a PC USB port </li>
<li>
Download and install STM32 ST-LINK Utility v3.6.0 (or later): it is available on ST web site (STSW-LINK004). </li>
<li>
Run the STM32 ST-LINK Utility v3.6.0 (or later): from Target menu, select Connect </li>
<li>
From ST-LINK menu, select Firmware Upgrade and Device Connect. Click on Yes &gt;&gt;&gt; tab for performing the ST-LINK firmware upgrade.</li>
</ol>
</li>
</ol>
</li>
</ul>
<h1><a class="anchor" id="S6"></a>
SDK Known problems and limitations</h1>
<ul>
<li>
This section lists the SDK SW issues known at release time. Issues found after this release are listed as solved or limitations on newer releases:<br />
 <ul>
<li>
ID 4848: STEVAL-IDB012V1 should mount 0603 SMPS inductor. </li>
<li>
ID 4795: When SMPS is off, the user must change the value of the TX output power in the high_power_pa_level_table in miscutil.c, according to the voltage applied to VFBSD pin. </li>
<li>
ID 4762: STEVAL-IDB011V2 R50, R51 0 Ohm resistors are not mounted. </li>
<li>
ID 3824: RAM corruption during context restore on FreeRTOS applications scenario: <ul>
<li>
A SW workaround has been added on SDK framework on Beacon FreeRTOS linker files: reserved 68 bytes at end of RAM. </li>
</ul>
</li>
<li>
ID 2489: BlueNRG-LPS, BLE stack v3.x: DTM project configuration to be tuned for matching device memory constraints (FLASH/RAM): <ul>
<li>
Refer to <a href="../BlueNRG-LP_key_resources/key_resources.html">BlueNRG-LP, BlueNRG-LPS Key Resources, 4) Design &amp; Bringing Up custom BlueNRG-LP, BlueNRG-LPS PCB</a> section. </li>
</ul>
</li>
<li>
ID 2488: BlueNRG-LPS, BLE stack v3.1: OTA framework impacted due to FLASH memory constraints: <ul>
<li>
BlueNRG-LPS Sensor Demo &amp; Sensor Demo BlueMS demonstration applications don't support OTA Lower and Higher App configurations. </li>
<li>
BlueNRG-LPS Serial Port WiSE-Studio demonstration applications don't support OTA Lower and Higher App configurations. </li>
<li>
BlueNRG-LPS Sensor Demo &amp; Sensor Demo BlueMS WiSE-Studio demonstration applications don't support OTA Service Manager configuration.</li>
</ul>
</li>
<li>
ID 1586: SPI1 MOSI pin driven by CMSIS/DAP debugger fw (&gt;v1.1) on BlueNRG_LP, BlueNRG-LPS eval board could impact SPI3 master demonstration applications:<ul>
<li>
Possible workaround: exclude CMSIS/DAP debugger microcontroller (STM32) by operating in battery mode.</li>
</ul>
</li>
<li>
ID 1442: BlueNRG-LPS, STEVAL_IDB012V1 alpha kit: PA3 pin conflict since it is used for both SPI Clock and SWD, SWCLK: <ul>
<li>
STEVAL-IDB012V1 alpha kit jumper JP3 must be removed when using DTM SPI. </li>
<li>
PB3 pin AF4 mode is the defualt configuration used for SPI CLK on official STEVAL-IDB012V1 kit version: <ul>
<li>
When using a STEVAL-IDB012V1 alpha kit, user must rebuild the DTM SPI with the preprocessor option STEVAL_IDB012V1_ALPHA. </li>
<li>
NOTE: BlueNRG-LPS Navigator DTM SPI image is built only for official STEVAL-IDB012V1 kit.</li>
</ul>
</li>
</ul>
</li>
<li>
ID 795: BlueNRG APP v 1.1 (smarthphone app) doesn't work on Android 10 </li>
<li>
<p class="startli">ID 0216: if a BlueNRG-LP HW board is configured for using SMPS (an inductor is connected between the pin VLXSD and the pin VFBSD), but user application sets the SMPS OFF SW configuration, the device doesn't work and it is not possible to connect to it. Possible workaround:</p><ul>
<li>
Provide a temporary VBLUE to the pin VFBSD in order to start up the device providing external power to the LDO1V2 that power up the digital domain. After the startup it is possible to load the CORRECT SMPS setting. </li>
</ul>
<p class="endli"></p>
</li>
</ul>
</li>
</ul>
</div></div><!-- contents -->
<!-- HTML footer for doxygen 1.8.10-->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Copyright &copy; 2022 by STMicrolectronics. All rights reserved.<br>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.10
</small></address>
</body>
</html>
